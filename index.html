
<!doctype html>
<html lang="es">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Directorio de Negocios Locales</title>
  <script src="/_sdk/element_sdk.js"></script>
  <style>
        body {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f5f5f5;
            height: 100%;
        }

        html {
            height: 100%;
        }

        /* Franja naranja superior */
        .top-banner {
            background: linear-gradient(135deg, #db3717, #ff4d2e);
            height: 80px;
            width: 100%;
            box-shadow: 0 2px 10px rgba(219, 55, 23, 0.3);
        }

        /* Contenedor principal */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Logo de la empresa */
        .logo-section {
            text-align: center;
            padding: 30px 0;
            background: white;
            margin-bottom: 0;
        }

        .company-logo {
            width: 120px;
            height: 120px;
            background: linear-gradient(135deg, #151a2b, #2a3142);
            border-radius: 50%;
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 15px rgba(21, 26, 43, 0.3);
        }

        .company-logo svg {
            width: 60px;
            height: 60px;
            fill: #db3717;
        }

        .company-name {
            font-size: 28px;
            font-weight: bold;
            color: #151a2b;
            margin: 0;
        }

        /* Barra de men√∫ */
        .menu-bar {
            background: #151a2b;
            padding: 15px 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .menu-content {
            display: flex;
            align-items: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .search-container {
            flex: 1;
            min-width: 300px;
            position: relative;
        }

        .search-input {
            width: 100%;
            padding: 12px 45px 12px 15px;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            outline: none;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .search-btn {
            position: absolute;
            right: 5px;
            top: 50%;
            transform: translateY(-50%);
            background: #db3717;
            border: none;
            border-radius: 50%;
            width: 35px;
            height: 35px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .search-btn:hover {
            background: #c12e15;
        }

        .menu-buttons {
            display: flex;
            gap: 15px;
        }

        .menu-btn {
            background: #db3717;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .menu-btn:hover {
            background: #c12e15;
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(219, 55, 23, 0.3);
        }

        /* Categor√≠as */
        .categories-section {
            padding: 40px 0;
            background: white;
        }

        .section-title {
            text-align: center;
            font-size: 32px;
            font-weight: bold;
            color: #151a2b;
            margin-bottom: 40px;
        }

        .categories-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .category-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid #f0f0f0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .category-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(219, 55, 23, 0.15);
            border-color: #db3717;
        }

        .category-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #db3717, #ff4d2e);
            border-radius: 50%;
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
        }

        .category-name {
            font-size: 18px;
            font-weight: 600;
            color: #151a2b;
            margin-bottom: 8px;
        }

        .category-count {
            font-size: 14px;
            color: #666;
        }

        /* Panel de administraci√≥n */
        .admin-panel {
            background: #151a2b;
            color: white;
            padding: 30px 0;
            margin-top: 40px;
        }

        .admin-title {
            text-align: center;
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 30px;
            color: #db3717;
        }

        .admin-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .admin-btn {
            background: #db3717;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .admin-btn:hover {
            background: #c12e15;
            transform: translateY(-2px);
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
        }

        .modal-content {
            background: white;
            margin: 5% auto;
            padding: 30px;
            border-radius: 15px;
            width: 90%;
            max-width: 600px;
            max-height: 80%;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
        }

        .modal-title {
            font-size: 24px;
            font-weight: bold;
            color: #151a2b;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #666;
            padding: 5px;
        }

        .close-btn:hover {
            color: #db3717;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #151a2b;
        }

        .form-input, .form-select, .form-textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            outline: none;
            transition: border-color 0.3s ease;
        }

        .form-input:focus, .form-select:focus, .form-textarea:focus {
            border-color: #db3717;
        }

        .form-textarea {
            resize: vertical;
            min-height: 100px;
        }

        .submit-btn {
            background: #db3717;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            transition: background 0.3s ease;
        }

        .submit-btn:hover {
            background: #c12e15;
        }

        /* Lista de negocios */
        .business-list {
            display: none;
            margin-top: 30px;
        }

        .business-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            border-left: 4px solid #db3717;
        }

        .business-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 10px;
        }

        .business-name {
            font-size: 20px;
            font-weight: bold;
            color: #151a2b;
            margin: 0;
        }

        .business-category {
            background: #db3717;
            color: white;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: 600;
        }

        .business-info {
            color: #666;
            margin-bottom: 10px;
        }

        .business-description {
            color: #333;
            line-height: 1.5;
        }

        /* P√°gina de Administrador */
        .admin-header {
            background: #151a2b;
            padding: 20px 0;
            border-bottom: 3px solid #db3717;
        }

        .admin-nav {
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 20px;
        }

        .back-btn {
            background: #db3717;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
        }

        .back-btn:hover {
            background: #c12e15;
            transform: translateY(-2px);
        }

        .admin-page-title {
            color: white;
            font-size: 28px;
            font-weight: bold;
            margin: 0;
        }

        .admin-content {
            padding: 40px 0;
            background: #f5f5f5;
            min-height: 70vh;
        }

        .section-subtitle {
            color: #151a2b;
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 25px;
        }

        /* Estad√≠sticas */
        .stats-section {
            margin-bottom: 40px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border-left: 4px solid #db3717;
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-number {
            font-size: 36px;
            font-weight: bold;
            color: #db3717;
            margin-bottom: 10px;
        }

        .stat-label {
            font-size: 16px;
            color: #666;
            font-weight: 600;
        }

        /* Gesti√≥n de Negocios */
        .management-section {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .business-table-container {
            overflow-x: auto;
        }

        .business-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .business-table th {
            background: #151a2b;
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
            border-bottom: 2px solid #db3717;
        }

        .business-table td {
            padding: 15px;
            border-bottom: 1px solid #e0e0e0;
            vertical-align: middle;
        }

        .business-table tr:hover {
            background: #f8f9fa;
        }

        .action-buttons {
            display: flex;
            gap: 10px;
        }

        .edit-btn, .delete-btn {
            padding: 8px 15px;
            border: none;
            border-radius: 5px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .edit-btn {
            background: #28a745;
            color: white;
        }

        .edit-btn:hover {
            background: #218838;
        }

        .delete-btn {
            background: #dc3545;
            color: white;
        }

        .delete-btn:hover {
            background: #c82333;
        }

        /* Responsive Design - Mobile First Approach */
        
        /* Extra Small Devices (phones, 320px and up) */
        @media (max-width: 480px) {
            .container {
                padding: 0 10px;
            }

            .top-banner {
                height: 60px;
            }

            .company-logo {
                width: 80px;
                height: 80px;
            }

            .company-logo svg {
                width: 40px;
                height: 40px;
            }

            .company-name {
                font-size: 20px;
            }

            .logo-section {
                padding: 20px 0;
            }

            .menu-bar {
                padding: 10px 0;
            }

            .menu-content {
                flex-direction: column;
                gap: 10px;
            }

            .search-container {
                min-width: 100%;
            }

            .search-input {
                padding: 10px 40px 10px 12px;
                font-size: 14px;
            }

            .menu-buttons {
                flex-direction: column;
                width: 100%;
                gap: 10px;
            }

            .menu-btn {
                padding: 10px 20px;
                font-size: 14px;
                width: 100%;
            }

            .section-title {
                font-size: 24px;
                margin-bottom: 25px;
            }

            .categories-section {
                padding: 25px 0;
            }

            .categories-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 12px;
            }

            .category-card {
                padding: 15px;
            }

            .category-icon {
                width: 45px;
                height: 45px;
                font-size: 20px;
                margin-bottom: 10px;
            }

            .category-name {
                font-size: 14px;
                margin-bottom: 5px;
            }

            .category-count {
                font-size: 12px;
            }

            .admin-panel {
                padding: 20px 0;
            }

            .admin-panel > .container > div {
                flex-direction: column;
                gap: 15px;
            }

            .admin-btn {
                padding: 12px 25px;
                font-size: 14px;
                width: 100%;
                max-width: 200px;
            }

            .modal-content {
                margin: 5% auto;
                width: 95%;
                padding: 20px;
                max-height: 90%;
            }

            .modal-title {
                font-size: 20px;
            }

            .form-input, .form-select, .form-textarea {
                padding: 10px;
                font-size: 14px;
            }

            .business-card {
                padding: 15px;
                margin-bottom: 12px;
            }

            .business-name {
                font-size: 16px;
            }

            .business-category {
                font-size: 10px;
                padding: 3px 8px;
            }

            .business-info {
                font-size: 13px;
                margin-bottom: 8px;
            }

            .business-description {
                font-size: 14px;
            }
        }

        /* Small Devices (landscape phones, 481px and up) */
        @media (min-width: 481px) and (max-width: 768px) {
            .container {
                padding: 0 15px;
            }

            .top-banner {
                height: 70px;
            }

            .company-logo {
                width: 100px;
                height: 100px;
            }

            .company-logo svg {
                width: 50px;
                height: 50px;
            }

            .company-name {
                font-size: 24px;
            }

            .logo-section {
                padding: 25px 0;
            }

            .menu-content {
                flex-direction: column;
                gap: 15px;
            }

            .search-container {
                min-width: 100%;
            }

            .menu-buttons {
                flex-direction: row;
                justify-content: center;
                flex-wrap: wrap;
                gap: 15px;
            }

            .menu-btn {
                flex: 1;
                min-width: 150px;
            }

            .section-title {
                font-size: 28px;
            }

            .categories-section {
                padding: 30px 0;
            }

            .categories-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 18px;
            }

            .category-card {
                padding: 20px;
            }

            .category-icon {
                width: 50px;
                height: 50px;
                font-size: 24px;
            }

            .category-name {
                font-size: 16px;
            }

            .admin-panel > .container > div {
                flex-direction: column;
                gap: 20px;
            }

            .admin-btn {
                width: auto;
                min-width: 150px;
            }

            .modal-content {
                margin: 8% auto;
                width: 90%;
                padding: 25px;
            }

            .business-table-container {
                overflow-x: auto;
            }

            .business-table {
                min-width: 600px;
                font-size: 13px;
            }

            .business-table th,
            .business-table td {
                padding: 8px 6px;
            }

            .action-buttons {
                flex-direction: column;
                gap: 5px;
            }

            .edit-btn, .delete-btn {
                padding: 6px 12px;
                font-size: 12px;
            }
        }

        /* Medium Devices (tablets, 769px and up) */
        @media (min-width: 769px) and (max-width: 1024px) {
            .container {
                padding: 0 20px;
            }

            .menu-content {
                flex-wrap: wrap;
                justify-content: space-between;
            }

            .search-container {
                flex: 1;
                min-width: 300px;
                max-width: 400px;
            }

            .menu-buttons {
                flex-shrink: 0;
            }

            .categories-grid {
                grid-template-columns: repeat(4, 1fr);
                gap: 20px;
            }

            .admin-panel > .container > div {
                flex-direction: row;
                justify-content: center;
                align-items: center;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 20px;
            }

            .section-header {
                flex-direction: row;
                justify-content: space-between;
                align-items: center;
            }

            .business-table {
                font-size: 14px;
            }

            .modal-content {
                width: 80%;
                max-width: 600px;
            }
        }

        /* Large Devices (desktops, 1025px and up) */
        @media (min-width: 1025px) and (max-width: 1440px) {
            .container {
                max-width: 1200px;
            }

            .categories-grid {
                grid-template-columns: repeat(4, 1fr);
                gap: 25px;
            }

            .stats-grid {
                grid-template-columns: repeat(3, 1fr);
            }

            .business-table {
                font-size: 15px;
            }
        }

        /* Extra Large Devices (large desktops, 1441px and up) */
        @media (min-width: 1441px) {
            .container {
                max-width: 1400px;
            }

            .categories-grid {
                grid-template-columns: repeat(5, 1fr);
            }

            .section-title {
                font-size: 36px;
            }

            .company-name {
                font-size: 32px;
            }

            .company-logo {
                width: 140px;
                height: 140px;
            }

            .company-logo svg {
                width: 70px;
                height: 70px;
            }
        }

        /* Landscape Orientation Adjustments */
        @media (max-height: 500px) and (orientation: landscape) {
            .logo-section {
                padding: 15px 0;
            }

            .company-logo {
                width: 60px;
                height: 60px;
            }

            .company-logo svg {
                width: 30px;
                height: 30px;
            }

            .company-name {
                font-size: 18px;
            }

            .categories-section {
                padding: 20px 0;
            }

            .section-title {
                font-size: 20px;
                margin-bottom: 20px;
            }

            .category-card {
                padding: 12px;
            }

            .category-icon {
                width: 35px;
                height: 35px;
                font-size: 16px;
                margin-bottom: 8px;
            }

            .category-name {
                font-size: 13px;
            }

            .category-count {
                font-size: 11px;
            }

            .admin-panel {
                padding: 15px 0;
            }
        }

        /* High DPI Displays */
        @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
            .company-logo svg,
            .search-btn svg {
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }
        }

        /* Print Styles */
        @media print {
            .top-banner,
            .menu-bar,
            .admin-panel,
            .modal {
                display: none !important;
            }

            .container {
                max-width: none;
                padding: 0;
            }

            .categories-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 15px;
            }

            .category-card {
                border: 1px solid #ccc;
                break-inside: avoid;
            }

            .business-card {
                border: 1px solid #ccc;
                break-inside: avoid;
                margin-bottom: 10px;
            }
        }

        /* Accessibility - Reduced Motion */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        /* Dark Mode Support */
        @media (prefers-color-scheme: dark) {
            .modal-content {
                background: #2a2a2a;
                color: #ffffff;
            }

            .form-input, .form-select, .form-textarea {
                background: #3a3a3a;
                color: #ffffff;
                border-color: #555;
            }

            .form-label {
                color: #ffffff;
            }
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body><!-- Franja naranja superior -->
  <div class="top-banner"></div><!-- Logo de la empresa -->
  <div class="logo-section">
   <div class="container">
    <div class="company-logo">
     <svg viewbox="0 0 24 24"><path d="M12 2L2 7V10C2 16 6 20.5 12 22C18 20.5 22 16 22 10V7L12 2M12 4.14L20 8.23V10C20 15.25 16.87 19.17 12 20.84C7.13 19.17 4 15.25 4 10V8.23L12 4.14Z" />
     </svg>
    </div>
    <h1 class="company-name" id="companyName">Mi Empresa</h1>
   </div>
  </div><!-- Barra de men√∫ -->
  <div class="menu-bar">
   <div class="container">
    <div class="menu-content">
     <div class="search-container"><input type="text" class="search-input" id="searchInput" placeholder="Buscar negocios en tu ciudad..."> <button class="search-btn" onclick="searchBusinesses()">
       <svg width="20" height="20" fill="white" viewbox="0 0 24 24"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" />
       </svg></button>
     </div>
     <div class="menu-buttons"><button class="menu-btn" onclick="showAboutUs()">¬øQui√©nes Somos?</button> <button class="menu-btn" onclick="showServices()">Servicios que Prestamos</button>
     </div>
    </div>
   </div>
  </div><!-- P√°gina Principal -->
  <div id="mainPage"><!-- Categor√≠as -->
   <div class="categories-section">
    <div class="container">
     <h2 class="section-title">Categor√≠as de Negocios</h2>
     <div class="categories-grid" id="categoriesGrid"><!-- Las categor√≠as se generan din√°micamente -->
     </div>
    </div>
   </div><!-- Lista de negocios -->
   <div class="container">
    <div class="business-list" id="businessList">
     <h3 style="color: #151a2b; font-size: 24px; margin-bottom: 20px;">Resultados de B√∫squeda</h3>
     <div id="businessResults"></div>
    </div>
   </div><!-- Panel de administraci√≥n -->
   <div class="admin-panel">
    <div class="container">
     <div style="display: flex; align-items: center; justify-content: center; gap: 30px; flex-wrap: wrap;"><button class="admin-btn" onclick="goToAdminPage()">Administrador</button> <span style="color: #db3717; font-size: 24px; font-weight: bold;">Hecho por: Solum</span>
     </div>
    </div>
   </div>
  </div><!-- P√°gina de Administrador -->
  <div id="adminPage" style="display: none;">
   <div class="admin-header">
    <div class="container">
     <div class="admin-nav"><button class="back-btn" onclick="goToMainPage()">
       <svg width="20" height="20" fill="white" viewbox="0 0 24 24"><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" />
       </svg> Volver al Inicio </button>
      <h2 class="admin-page-title">Panel de Administrador</h2>
     </div>
    </div>
   </div>
   <div class="admin-content">
    <div class="container"><!-- Estad√≠sticas -->
     <div class="stats-section">
      <h3 class="section-subtitle">Estad√≠sticas del Sistema</h3>
      <div class="stats-grid">
       <div class="stat-card">
        <div class="stat-number" id="totalBusinesses">
         0
        </div>
        <div class="stat-label">
         Total de Negocios
        </div>
       </div>
       <div class="stat-card">
        <div class="stat-number" id="totalCategories">
         8
        </div>
        <div class="stat-label">
         Categor√≠as Disponibles
        </div>
       </div>
       <div class="stat-card">
        <div class="stat-number" id="activeBusinesses">
         0
        </div>
        <div class="stat-label">
         Negocios Activos
        </div>
       </div>
      </div>
     </div><!-- Gesti√≥n de Negocios -->
     <div class="management-section">
      <div class="section-header">
       <h3 class="section-subtitle">Gesti√≥n de Negocios</h3><button class="admin-btn" onclick="showAddBusinessModal()">+ Agregar Negocio</button>
      </div>
      <div class="business-table-container">
       <table class="business-table">
        <thead>
         <tr>
          <th>Nombre</th>
          <th>Categor√≠a</th>
          <th>Direcci√≥n</th>
          <th>Tel√©fono</th>
          <th>Acciones</th>
         </tr>
        </thead>
        <tbody id="businessTableBody"><!-- Los negocios se cargan din√°micamente -->
        </tbody>
       </table>
      </div>
     </div>
    </div>
   </div>
  </div><!-- Modal -->
  <div class="modal" id="modal">
   <div class="modal-content">
    <div class="modal-header">
     <h3 class="modal-title" id="modalTitle">T√≠tulo del Modal</h3><button class="close-btn" onclick="closeModal()">√ó</button>
    </div>
    <div id="modalBody"><!-- Contenido del modal se genera din√°micamente -->
    </div>
   </div>
  </div>
  <script>
        // Configuraci√≥n por defecto
        const defaultConfig = {
            company_name: "Mi Empresa",
            city_name: "Mi Ciudad",
            search_placeholder: "Buscar negocios en tu ciudad..."
        };

        // Datos de ejemplo
        let businesses = [
            {
                id: 1,
                name: "Hotel Plaza Central",
                category: "hoteles",
                address: "Av. Principal 123",
                phone: "555-0123",
                description: "Hotel de lujo en el centro de la ciudad con todas las comodidades."
            },
            {
                id: 2,
                name: "Restaurante El Buen Sabor",
                category: "restaurantes",
                address: "Calle Gastron√≥mica 456",
                phone: "555-0456",
                description: "Comida tradicional con los mejores ingredientes locales."
            },
            {
                id: 3,
                name: "Helader√≠a Dulce Tentaci√≥n",
                category: "heladerias",
                address: "Plaza de los Sabores 789",
                phone: "555-0789",
                description: "Helados artesanales con sabores √∫nicos y naturales."
            }
        ];

        const categories = [
            { id: 'hoteles', name: 'Hoteles', icon: 'üè®', count: 0 },
            { id: 'restaurantes', name: 'Restaurantes', icon: 'üçΩÔ∏è', count: 0 },
            { id: 'heladerias', name: 'Helader√≠as', icon: 'üç¶', count: 0 },
            { id: 'tiendas', name: 'Tiendas', icon: 'üõçÔ∏è', count: 0 },
            { id: 'servicios', name: 'Servicios', icon: 'üîß', count: 0 },
            { id: 'entretenimiento', name: 'Entretenimiento', icon: 'üé≠', count: 0 },
            { id: 'salud', name: 'Salud', icon: 'üè•', count: 0 },
            { id: 'educacion', name: 'Educaci√≥n', icon: 'üìö', count: 0 }
        ];

        // Inicializaci√≥n
        function init() {
            updateCategoryCounts();
            renderCategories();
            loadBusinessesFromStorage();
        }

        function updateCategoryCounts() {
            categories.forEach(category => {
                category.count = businesses.filter(b => b.category === category.id).length;
            });
        }

        function renderCategories() {
            const grid = document.getElementById('categoriesGrid');
            grid.innerHTML = categories.map(category => `
                <div class="category-card" onclick="filterByCategory('${category.id}')">
                    <div class="category-icon">${category.icon}</div>
                    <div class="category-name">${category.name}</div>
                    <div class="category-count">${category.count} negocios</div>
                </div>
            `).join('');
        }

        function filterByCategory(categoryId) {
            const filtered = businesses.filter(b => b.category === categoryId);
            const categoryName = categories.find(c => c.id === categoryId)?.name || 'Categor√≠a';
            showBusinessResults(filtered, `Negocios en ${categoryName}`);
        }

        function searchBusinesses() {
            const query = document.getElementById('searchInput').value.toLowerCase().trim();
            if (!query) {
                document.getElementById('businessList').style.display = 'none';
                return;
            }

            const filtered = businesses.filter(b => 
                b.name.toLowerCase().includes(query) ||
                b.description.toLowerCase().includes(query) ||
                b.address.toLowerCase().includes(query)
            );

            showBusinessResults(filtered, `Resultados para "${query}"`);
        }

        function showBusinessResults(businessList, title) {
            const resultsContainer = document.getElementById('businessResults');
            const listContainer = document.getElementById('businessList');
            
            resultsContainer.innerHTML = businessList.length > 0 
                ? businessList.map(business => `
                    <div class="business-card">
                        <div class="business-header">
                            <h4 class="business-name">${business.name}</h4>
                            <span class="business-category">${categories.find(c => c.id === business.category)?.name || business.category}</span>
                        </div>
                        <div class="business-info">
                            üìç ${business.address} | üìû ${business.phone}
                        </div>
                        <div class="business-description">${business.description}</div>
                    </div>
                `).join('')
                : '<p style="text-align: center; color: #666; padding: 40px;">No se encontraron negocios que coincidan con tu b√∫squeda.</p>';

            listContainer.querySelector('h3').textContent = title;
            listContainer.style.display = 'block';
            listContainer.scrollIntoView({ behavior: 'smooth' });
        }

        function showAddBusinessModal() {
            document.getElementById('modalTitle').textContent = 'Agregar Nuevo Negocio';
            document.getElementById('modalBody').innerHTML = `
                <form onsubmit="addBusiness(event)">
                    <div class="form-group">
                        <label class="form-label">Nombre del Negocio</label>
                        <input type="text" class="form-input" name="name" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Categor√≠a</label>
                        <select class="form-select" name="category" required>
                            <option value="">Seleccionar categor√≠a</option>
                            ${categories.map(cat => `<option value="${cat.id}">${cat.name}</option>`).join('')}
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Direcci√≥n</label>
                        <input type="text" class="form-input" name="address" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Tel√©fono</label>
                        <input type="tel" class="form-input" name="phone" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Descripci√≥n</label>
                        <textarea class="form-textarea" name="description" required></textarea>
                    </div>
                    <button type="submit" class="submit-btn">Agregar Negocio</button>
                </form>
            `;
            document.getElementById('modal').style.display = 'block';
        }

        function addBusiness(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            const newBusiness = {
                id: Date.now(),
                name: formData.get('name'),
                category: formData.get('category'),
                address: formData.get('address'),
                phone: formData.get('phone'),
                description: formData.get('description')
            };

            businesses.push(newBusiness);
            saveBusinessesToStorage();
            updateCategoryCounts();
            renderCategories();
            closeModal();
            
            // Mostrar mensaje de √©xito
            showSuccessMessage('¬°Negocio agregado exitosamente!');
        }

        function showManageBusinesses() {
            document.getElementById('modalTitle').textContent = 'Gestionar Negocios';
            document.getElementById('modalBody').innerHTML = `
                <div style="max-height: 400px; overflow-y: auto;">
                    ${businesses.length > 0 
                        ? businesses.map(business => `
                            <div class="business-card" style="margin-bottom: 15px;">
                                <div class="business-header">
                                    <h4 class="business-name">${business.name}</h4>
                                    <button onclick="deleteBusiness(${business.id})" style="background: #dc3545; color: white; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer;">Eliminar</button>
                                </div>
                                <div class="business-info">
                                    üìç ${business.address} | üìû ${business.phone}
                                </div>
                                <div class="business-description">${business.description}</div>
                            </div>
                        `).join('')
                        : '<p style="text-align: center; color: #666; padding: 40px;">No hay negocios registrados.</p>'
                    }
                </div>
            `;
            document.getElementById('modal').style.display = 'block';
        }

        function deleteBusiness(id) {
            businesses = businesses.filter(b => b.id !== id);
            saveBusinessesToStorage();
            updateCategoryCounts();
            renderCategories();
            
            // Si estamos en la p√°gina de administrador, actualizar la tabla
            if (document.getElementById('adminPage').style.display !== 'none') {
                updateAdminStats();
                loadBusinessTable();
            } else {
                showManageBusinesses(); // Refresh the modal si estamos en la p√°gina principal
            }
            
            showSuccessMessage('Negocio eliminado exitosamente');
        }

        function showAboutUs() {
            document.getElementById('modalTitle').textContent = '¬øQui√©nes Somos?';
            document.getElementById('modalBody').innerHTML = `
                <div style="line-height: 1.6; color: #333;">
                    <p>Somos una plataforma digital dedicada a conectar a los ciudadanos con los mejores negocios locales de su ciudad.</p>
                    <p>Nuestra misi√≥n es promover el comercio local y facilitar que las personas descubran nuevos lugares y servicios en su comunidad.</p>
                    <h4 style="color: #151a2b; margin-top: 25px;">Nuestros Valores:</h4>
                    <ul>
                        <li>ü§ù Apoyo al comercio local</li>
                        <li>üåü Calidad en el servicio</li>
                        <li>üí° Innovaci√≥n tecnol√≥gica</li>
                        <li>üèòÔ∏è Compromiso con la comunidad</li>
                    </ul>
                </div>
            `;
            document.getElementById('modal').style.display = 'block';
        }

        function showServices() {
            document.getElementById('modalTitle').textContent = 'Servicios que Prestamos';
            document.getElementById('modalBody').innerHTML = `
                <div style="line-height: 1.6; color: #333;">
                    <h4 style="color: #151a2b;">Para Negocios:</h4>
                    <ul>
                        <li>üìù Registro y publicaci√≥n de negocios</li>
                        <li>üìä Gesti√≥n de informaci√≥n comercial</li>
                        <li>üéØ Categorizaci√≥n por sectores</li>
                        <li>üì± Visibilidad en plataforma digital</li>
                    </ul>
                    
                    <h4 style="color: #151a2b; margin-top: 25px;">Para Usuarios:</h4>
                    <ul>
                        <li>üîç B√∫squeda avanzada de negocios</li>
                        <li>üóÇÔ∏è Navegaci√≥n por categor√≠as</li>
                        <li>üìç Informaci√≥n de contacto y ubicaci√≥n</li>
                        <li>üíº Descubrimiento de servicios locales</li>
                    </ul>
                    
                    <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin-top: 20px; text-align: center;">
                        <strong style="color: #db3717;">¬°Conectamos tu ciudad con sus mejores negocios!</strong>
                    </div>
                </div>
            `;
            document.getElementById('modal').style.display = 'block';
        }

        function showSettings() {
            document.getElementById('modalTitle').textContent = 'Configuraci√≥n de la Plataforma';
            document.getElementById('modalBody').innerHTML = `
                <form onsubmit="saveSettings(event)">
                    <div class="form-group">
                        <label class="form-label">Nombre de la Empresa</label>
                        <input type="text" class="form-input" name="companyName" value="${document.getElementById('companyName').textContent}">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Nombre de la Ciudad</label>
                        <input type="text" class="form-input" name="cityName" value="Mi Ciudad">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Texto del Buscador</label>
                        <input type="text" class="form-input" name="searchPlaceholder" value="${document.getElementById('searchInput').placeholder}">
                    </div>
                    <button type="submit" class="submit-btn">Guardar Configuraci√≥n</button>
                </form>
            `;
            document.getElementById('modal').style.display = 'block';
        }

        function saveSettings(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            
            document.getElementById('companyName').textContent = formData.get('companyName');
            document.getElementById('searchInput').placeholder = formData.get('searchPlaceholder');
            
            closeModal();
            showSuccessMessage('Configuraci√≥n guardada exitosamente');
        }

        function closeModal() {
            document.getElementById('modal').style.display = 'none';
        }

        function showSuccessMessage(message) {
            const successDiv = document.createElement('div');
            successDiv.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #28a745;
                color: white;
                padding: 15px 25px;
                border-radius: 8px;
                z-index: 1001;
                font-weight: 600;
                box-shadow: 0 4px 15px rgba(40, 167, 69, 0.3);
            `;
            successDiv.textContent = message;
            document.body.appendChild(successDiv);
            
            setTimeout(() => {
                document.body.removeChild(successDiv);
            }, 3000);
        }

        // Funciones de navegaci√≥n
        function goToAdminPage() {
            document.getElementById('mainPage').style.display = 'none';
            document.getElementById('adminPage').style.display = 'block';
            updateAdminStats();
            loadBusinessTable();
        }

        function goToMainPage() {
            document.getElementById('adminPage').style.display = 'none';
            document.getElementById('mainPage').style.display = 'block';
        }

        function updateAdminStats() {
            document.getElementById('totalBusinesses').textContent = businesses.length;
            document.getElementById('activeBusinesses').textContent = businesses.length;
        }

        function loadBusinessTable() {
            const tbody = document.getElementById('businessTableBody');
            tbody.innerHTML = businesses.length > 0 
                ? businesses.map(business => `
                    <tr>
                        <td><strong>${business.name}</strong></td>
                        <td>
                            <span style="background: #db3717; color: white; padding: 4px 8px; border-radius: 12px; font-size: 12px; font-weight: 600;">
                                ${categories.find(c => c.id === business.category)?.name || business.category}
                            </span>
                        </td>
                        <td>${business.address}</td>
                        <td>${business.phone}</td>
                        <td>
                            <div class="action-buttons">
                                <button class="edit-btn" onclick="editBusiness(${business.id})">Editar</button>
                                <button class="delete-btn" onclick="confirmDeleteBusiness(${business.id})">Eliminar</button>
                            </div>
                        </td>
                    </tr>
                `).join('')
                : '<tr><td colspan="5" style="text-align: center; color: #666; padding: 40px;">No hay negocios registrados</td></tr>';
        }

        function editBusiness(id) {
            const business = businesses.find(b => b.id === id);
            if (!business) return;

            document.getElementById('modalTitle').textContent = 'Editar Negocio';
            document.getElementById('modalBody').innerHTML = `
                <form onsubmit="updateBusiness(event, ${id})">
                    <div class="form-group">
                        <label class="form-label">Nombre del Negocio</label>
                        <input type="text" class="form-input" name="name" value="${business.name}" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Categor√≠a</label>
                        <select class="form-select" name="category" required>
                            ${categories.map(cat => `<option value="${cat.id}" ${cat.id === business.category ? 'selected' : ''}>${cat.name}</option>`).join('')}
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Direcci√≥n</label>
                        <input type="text" class="form-input" name="address" value="${business.address}" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Tel√©fono</label>
                        <input type="tel" class="form-input" name="phone" value="${business.phone}" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Descripci√≥n</label>
                        <textarea class="form-textarea" name="description" required>${business.description}</textarea>
                    </div>
                    <button type="submit" class="submit-btn">Actualizar Negocio</button>
                </form>
            `;
            document.getElementById('modal').style.display = 'block';
        }

        function updateBusiness(event, id) {
            event.preventDefault();
            const formData = new FormData(event.target);
            const businessIndex = businesses.findIndex(b => b.id === id);
            
            if (businessIndex !== -1) {
                businesses[businessIndex] = {
                    ...businesses[businessIndex],
                    name: formData.get('name'),
                    category: formData.get('category'),
                    address: formData.get('address'),
                    phone: formData.get('phone'),
                    description: formData.get('description')
                };

                saveBusinessesToStorage();
                updateCategoryCounts();
                renderCategories();
                updateAdminStats();
                loadBusinessTable();
                closeModal();
                showSuccessMessage('¬°Negocio actualizado exitosamente!');
            }
        }

        function confirmDeleteBusiness(id) {
            const business = businesses.find(b => b.id === id);
            if (!business) return;

            document.getElementById('modalTitle').textContent = 'Confirmar Eliminaci√≥n';
            document.getElementById('modalBody').innerHTML = `
                <div style="text-align: center; padding: 20px;">
                    <div style="font-size: 48px; color: #dc3545; margin-bottom: 20px;">‚ö†Ô∏è</div>
                    <h4 style="color: #151a2b; margin-bottom: 15px;">¬øEst√°s seguro de que deseas eliminar este negocio?</h4>
                    <p style="color: #666; margin-bottom: 25px;"><strong>${business.name}</strong></p>
                    <p style="color: #dc3545; font-size: 14px; margin-bottom: 30px;">Esta acci√≥n no se puede deshacer.</p>
                    <div style="display: flex; gap: 15px; justify-content: center;">
                        <button onclick="closeModal()" style="background: #6c757d; color: white; border: none; padding: 12px 25px; border-radius: 8px; cursor: pointer;">Cancelar</button>
                        <button onclick="deleteBusiness(${id}); closeModal();" style="background: #dc3545; color: white; border: none; padding: 12px 25px; border-radius: 8px; cursor: pointer;">Eliminar</button>
                    </div>
                </div>
            `;
            document.getElementById('modal').style.display = 'block';
        }

        function saveBusinessesToStorage() {
            localStorage.setItem('localBusinesses', JSON.stringify(businesses));
        }

        function loadBusinessesFromStorage() {
            const stored = localStorage.getItem('localBusinesses');
            if (stored) {
                businesses = JSON.parse(stored);
                updateCategoryCounts();
                renderCategories();
            }
        }

        // Event listeners
        document.getElementById('searchInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchBusinesses();
            }
        });

        window.onclick = function(event) {
            const modal = document.getElementById('modal');
            if (event.target === modal) {
                closeModal();
            }
        };

        // SDK Integration
        if (window.elementSdk) {
            const element = {
                defaultConfig: defaultConfig,
                render: async function(config) {
                    document.getElementById('companyName').textContent = config.company_name || defaultConfig.company_name;
                    document.getElementById('searchInput').placeholder = config.search_placeholder || defaultConfig.search_placeholder;
                },
                mapToCapabilities: function(config) {
                    return {
                        recolorables: [],
                        borderables: [],
                        fontEditable: undefined,
                        fontSizeable: undefined
                    };
                },
                mapToEditPanelValues: function(config) {
                    return new Map([
                        ["company_name", config.company_name || defaultConfig.company_name],
                        ["city_name", config.city_name || defaultConfig.city_name],
                        ["search_placeholder", config.search_placeholder || defaultConfig.search_placeholder]
                    ]);
                }
            };

            window.elementSdk.init(element);
        }

        // Inicializar la aplicaci√≥n
        init();
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'991ace9a70fe25b2',t:'MTc2MDk4NzM0MC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>


