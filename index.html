<!doctype html>
<html lang="es">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Directorio de Negocios Locales</title>
  <script src="/_sdk/element_sdk.js"></script>
  <style>
        body {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            min-height: 100%;
            color: #151a2b;
        }

        /* Pantalla de carga inicial */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #db3717 0%, #ff6b47 50%, #151a2b 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            animation: fadeOut 1s ease-in-out 4s forwards;
        }

        .loading-screen.hidden {
            display: none;
        }

        .loading-logo {
            width: 150px;
            height: 150px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 60px;
            font-weight: bold;
            color: #db3717;
            margin-bottom: 30px;
            animation: pulse 2s ease-in-out infinite, rotate 4s linear infinite;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .loading-text {
            color: white;
            font-size: 28px;
            font-weight: 700;
            text-align: center;
            margin-bottom: 10px;
            animation: slideUp 1s ease-out 0.5s both;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
        }

        .loading-subtitle {
            color: rgba(255, 255, 255, 0.9);
            font-size: 16px;
            text-align: center;
            animation: slideUp 1s ease-out 1s both;
            text-shadow: 0 1px 5px rgba(0, 0, 0, 0.3);
        }

        .loading-progress {
            width: 300px;
            height: 4px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 2px;
            margin-top: 40px;
            overflow: hidden;
            animation: slideUp 1s ease-out 1.5s both;
        }

        .loading-progress-bar {
            width: 0%;
            height: 100%;
            background: linear-gradient(90deg, #ffffff, #f0f0f0);
            border-radius: 2px;
            animation: progressFill 4s ease-in-out forwards;
        }

        .main-content {
            opacity: 0;
            animation: fadeIn 1s ease-in-out 5s forwards;
        }

        /* Animaciones */
        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            }
            50% {
                transform: scale(1.1);
                box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
            }
        }

        @keyframes rotate {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes progressFill {
            0% {
                width: 0%;
            }
            25% {
                width: 25%;
            }
            50% {
                width: 50%;
            }
            75% {
                width: 75%;
            }
            100% {
                width: 100%;
            }
        }

        @keyframes fadeOut {
            0% {
                opacity: 1;
                visibility: visible;
            }
            100% {
                opacity: 0;
                visibility: hidden;
            }
        }

        @keyframes fadeIn {
            0% {
                opacity: 0;
            }
            100% {
                opacity: 1;
            }
        }

        /* Franja naranja superior */
        .top-banner {
            background: linear-gradient(135deg, #db3717 0%, #ff6b47 100%);
            height: 80px;
            width: 100%;
            box-shadow: 0 4px 20px rgba(219, 55, 23, 0.3);
            position: relative;
            overflow: hidden;
        }

        .top-banner::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 20"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="75" cy="75" r="1" fill="rgba(255,255,255,0.1)"/></pattern></defs><rect width="100" height="20" fill="url(%23grain)"/></svg>');
            opacity: 0.3;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Logo de la empresa */
        .logo-section {
            background: white;
            padding: 30px 0;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .company-logo {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            border: 4px solid #db3717;
            object-fit: cover;
            box-shadow: 0 4px 15px rgba(219, 55, 23, 0.2);
        }

        .company-info h1 {
            margin: 0;
            font-size: 32px;
            font-weight: 700;
            color: #151a2b;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .company-info p {
            margin: 5px 0 0 0;
            color: #666;
            font-size: 16px;
        }

        /* Barra de menú con búsqueda */
        .menu-bar {
            background: #151a2b;
            padding: 20px 0;
            box-shadow: 0 4px 15px rgba(21, 26, 43, 0.2);
        }

        .menu-content {
            display: flex;
            align-items: center;
            gap: 20px;
            flex-wrap: wrap;
            justify-content: space-between;
        }

        .search-container {
            flex: 1;
            max-width: 400px;
            position: relative;
        }

        .search-input {
            width: 100%;
            padding: 12px 45px 12px 15px;
            border: 2px solid #db3717;
            border-radius: 25px;
            font-size: 16px;
            outline: none;
            transition: all 0.3s ease;
            box-sizing: border-box;
        }

        .search-input:focus {
            box-shadow: 0 0 0 3px rgba(219, 55, 23, 0.2);
            border-color: #ff6b47;
        }

        .search-btn {
            position: absolute;
            right: 5px;
            top: 50%;
            transform: translateY(-50%);
            background: #db3717;
            color: white;
            border: none;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .search-btn:hover {
            background: #c62d42;
            transform: translateY(-50%) scale(1.1);
        }

        .menu-buttons {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .menu-btn {
            background: linear-gradient(45deg, #db3717, #ff6b47);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            font-size: 14px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(219, 55, 23, 0.3);
            white-space: nowrap;
        }

        .menu-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(219, 55, 23, 0.4);
            background: linear-gradient(45deg, #c62d42, #e84057);
        }

        /* Carrusel de imágenes */
        .carousel-section {
            padding: 30px 0;
            background: white;
            overflow: hidden;
        }

        .carousel-container {
            width: 100%;
            overflow: hidden;
            position: relative;
        }

        .carousel-track {
            display: flex;
            gap: 20px;
            animation: scroll-left 20s linear infinite;
            width: calc(160px * 16 + 20px * 15); /* 16 imágenes con gaps */
        }

        .carousel-image {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            border: 4px solid #db3717;
            object-fit: cover;
            box-shadow: 0 4px 15px rgba(219, 55, 23, 0.2);
            flex-shrink: 0;
            transition: transform 0.3s ease;
        }

        .carousel-image:hover {
            transform: scale(1.1);
        }

        @keyframes scroll-left {
            0% {
                transform: translateX(calc(-80px * 8 - 20px * 7)); /* Comienza desde la izquierda */
            }
            100% {
                transform: translateX(0); /* Se mueve hacia la derecha */
            }
        }

        /* Sección de categorías */
        .categories-section {
            padding: 40px 0;
            background: white;
        }

        .section-title {
            text-align: center;
            font-size: 28px;
            font-weight: 700;
            color: #151a2b;
            margin-bottom: 40px;
            position: relative;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 4px;
            background: linear-gradient(45deg, #db3717, #ff6b47);
            border-radius: 2px;
        }

        .categories-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .category-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
        }

        .category-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(219, 55, 23, 0.1), transparent);
            transition: left 0.5s ease;
        }

        .category-card:hover::before {
            left: 100%;
        }

        .category-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
            border-color: #db3717;
        }

        .category-icon {
            font-size: 48px;
            margin-bottom: 15px;
            display: block;
            transition: transform 0.3s ease;
        }

        .category-card:hover .category-icon {
            transform: scale(1.1);
        }

        .category-name {
            font-size: 18px;
            font-weight: 600;
            color: #151a2b;
            margin-bottom: 8px;
        }

        .category-count {
            color: #666;
            font-size: 14px;
            background: #f8f9fa;
            padding: 4px 12px;
            border-radius: 15px;
            display: inline-block;
        }

        /* Lista de negocios */
        .business-list {
            display: none;
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }

        /* Página de detalles del negocio */
        .business-details-page {
            display: none;
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }



        .back-button {
            background: #f8f9fa;
            color: #151a2b;
            border: 2px solid #db3717;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            font-size: 14px;
            margin-bottom: 20px;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .back-button:hover {
            background: #db3717;
            color: white;
            transform: translateX(-5px);
        }

        .business-title {
            font-size: 36px;
            font-weight: 700;
            margin: 0 0 10px 0;
            color: #151a2b;
        }

        .business-category-badge {
            background: #db3717;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            display: inline-block;
            margin-bottom: 15px;
        }

        .business-rating {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 18px;
            color: #151a2b;
        }

        .stars {
            color: #ffd700;
            font-size: 20px;
        }

        .business-content {
            padding: 40px 30px;
        }

        .business-section {
            margin-bottom: 40px;
        }

        .section-header {
            font-size: 24px;
            font-weight: 700;
            color: #151a2b;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }

        .info-card {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 25px;
            border-left: 4px solid #db3717;
            transition: all 0.3s ease;
        }

        .info-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }

        .info-item {
            display: flex;
            align-items: flex-start;
            gap: 15px;
            margin-bottom: 20px;
        }

        .info-item:last-child {
            margin-bottom: 0;
        }

        .info-icon {
            font-size: 24px;
            width: 40px;
            height: 40px;
            background: #db3717;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .info-content {
            flex: 1;
        }

        .info-label {
            font-weight: 600;
            color: #151a2b;
            margin-bottom: 5px;
            font-size: 16px;
        }

        .info-value {
            color: #666;
            font-size: 15px;
            line-height: 1.5;
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-top: 30px;
        }

        .action-btn {
            background: linear-gradient(45deg, #db3717, #ff6b47);
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            font-size: 16px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            text-decoration: none;
            box-shadow: 0 4px 15px rgba(219, 55, 23, 0.3);
        }

        .action-btn svg {
            flex-shrink: 0;
            transition: transform 0.3s ease;
        }

        .action-btn:hover svg {
            transform: scale(1.1);
        }

        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(219, 55, 23, 0.4);
        }

        .action-btn.secondary {
            background: #151a2b;
        }

        .action-btn.secondary:hover {
            background: #2c3e50;
        }

        .business-gallery {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .gallery-item {
            width: 100%;
            height: 150px;
            border-radius: 10px;
            border: 3px solid #db3717;
            object-fit: cover;
            transition: transform 0.3s ease;
            cursor: pointer;
        }

        .gallery-item:hover {
            transform: scale(1.05);
        }

        .hours-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .hours-day {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-left: 3px solid #db3717;
        }

        .day-name {
            font-weight: 600;
            color: #151a2b;
        }

        .day-hours {
            color: #666;
            font-size: 14px;
        }

        .day-hours.closed {
            color: #dc3545;
            font-weight: 600;
        }

        .day-hours.open {
            color: #28a745;
            font-weight: 600;
        }

        .business-list h2 {
            color: #151a2b;
            margin-bottom: 25px;
            font-size: 24px;
            text-align: center;
        }

        .business-item {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            transition: all 0.3s ease;
            cursor: pointer;
            border-left: 4px solid #db3717;
        }

        .business-item:hover {
            transform: translateX(5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
            background: white;
        }

        .business-name {
            font-size: 20px;
            font-weight: 600;
            color: #151a2b;
            margin-bottom: 8px;
        }

        .business-category {
            background: #db3717;
            color: white;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: 600;
            display: inline-block;
            margin-bottom: 10px;
        }

        .business-info {
            color: #666;
            font-size: 14px;
            line-height: 1.5;
        }

        .business-logo-item {
            width: 120px;
            height: 120px;
            border-radius: 10px;
            border: 3px solid #db3717;
            object-fit: cover;
            box-shadow: 0 4px 15px rgba(219, 55, 23, 0.2);
            transition: transform 0.3s ease;
        }

        .business-logo-item:hover {
            transform: scale(1.05);
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(21, 26, 43, 0.8);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 0;
            border-radius: 15px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: modalSlideIn 0.3s ease;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-header {
            background: linear-gradient(45deg, #db3717, #ff6b47);
            color: white;
            padding: 25px;
            border-radius: 15px 15px 0 0;
            position: relative;
        }

        .modal-title {
            margin: 0;
            font-size: 24px;
            font-weight: 600;
        }

        .close {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: white;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .close:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .modal-body {
            padding: 30px;
        }

        /* Formularios */
        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #151a2b;
        }

        .form-input, .form-select, .form-textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e1e8ed;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s ease;
            box-sizing: border-box;
        }

        .form-input:focus, .form-select:focus, .form-textarea:focus {
            outline: none;
            border-color: #db3717;
            box-shadow: 0 0 0 3px rgba(219, 55, 23, 0.1);
        }

        .form-textarea {
            resize: vertical;
            min-height: 100px;
        }

        .submit-btn {
            background: linear-gradient(45deg, #db3717, #ff6b47);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 16px;
            width: 100%;
            transition: all 0.3s ease;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(219, 55, 23, 0.3);
        }

        /* Panel de administración */
        .admin-panel {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }

        .admin-buttons {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .admin-btn {
            background: #151a2b;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .admin-btn:hover {
            background: #2c3e50;
            transform: translateY(-2px);
        }

        .admin-btn.primary {
            background: linear-gradient(45deg, #db3717, #ff6b47);
        }

        .admin-btn.primary:hover {
            background: linear-gradient(45deg, #c62d42, #e84057);
        }

        /* Botones flotantes */
        .floating-buttons {
            position: fixed;
            bottom: 30px;
            right: 30px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            z-index: 999;
        }

        .floating-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            font-size: 24px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .floating-btn:hover {
            transform: scale(1.1);
        }

        .floating-btn.admin {
            background: linear-gradient(45deg, #151a2b, #2c3e50);
            color: white;
        }

        .floating-btn.scroll-top {
            background: linear-gradient(45deg, #db3717, #c62d42);
            color: white;
        }

        /* Botón de administración en el pie de página */
        .footer-admin-btn {
            position: absolute;
            left: 30px;
            top: 50%;
            transform: translateY(-50%);
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            font-size: 12px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            z-index: 2;
        }

        .footer-admin-btn:hover {
            transform: translateY(-50%) scale(1.1);
            background: rgba(255, 255, 255, 0.3);
        }

        /* Pie de página */
        .footer-banner {
            background: linear-gradient(135deg, #151a2b 0%, #2c3e50 100%);
            padding: 30px 0;
            margin-top: 50px;
            box-shadow: 0 -4px 20px rgba(21, 26, 43, 0.3);
            position: relative;
            overflow: hidden;
        }

        .footer-banner::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 20"><defs><pattern id="footerGrain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="75" cy="75" r="1" fill="rgba(255,255,255,0.1)"/></pattern></defs><rect width="100" height="20" fill="url(%23footerGrain)"/></svg>');
            opacity: 0.3;
        }

        .footer-content {
            text-align: center;
            position: relative;
            z-index: 1;
        }

        .footer-content p {
            margin: 0;
            color: white;
            font-size: 18px;
            font-weight: 600;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        /* Responsive Design - Mobile First Approach */
        
        /* Extra Small Devices (phones, 320px and up) */
        @media (max-width: 374px) {
            .container {
                padding: 0 10px;
            }

            .top-banner {
                height: 50px;
            }

            .logo-section {
                padding: 20px 0;
            }

            .company-logo {
                width: 50px;
                height: 50px;
            }

            .company-info h1 {
                font-size: 18px;
            }

            .company-info p {
                font-size: 14px;
            }

            .menu-bar {
                padding: 15px 0;
            }

            .menu-content {
                flex-direction: column;
                gap: 12px;
            }

            .search-input {
                padding: 10px 40px 10px 12px;
                font-size: 14px;
            }

            .search-btn {
                width: 30px;
                height: 30px;
                font-size: 14px;
            }

            .menu-btn {
                padding: 10px 16px;
                font-size: 12px;
            }

            .section-title {
                font-size: 22px;
                margin-bottom: 25px;
            }

            .categories-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
            }

            .category-card {
                padding: 15px 10px;
            }

            .category-icon {
                font-size: 28px;
                margin-bottom: 8px;
            }

            .category-name {
                font-size: 14px;
                margin-bottom: 5px;
            }

            .category-count {
                font-size: 11px;
                padding: 3px 8px;
            }

            .business-item {
                padding: 15px;
                margin-bottom: 10px;
            }

            .business-name {
                font-size: 16px;
                margin-bottom: 6px;
            }

            .business-info {
                font-size: 12px;
            }

            .floating-buttons {
                bottom: 15px;
                right: 15px;
                gap: 10px;
            }

            .floating-btn {
                width: 45px;
                height: 45px;
                font-size: 18px;
            }

            .carousel-track {
                gap: 10px;
                animation-duration: 15s;
            }

            .carousel-image {
                width: 60px;
                height: 60px;
                border-width: 2px;
            }

            .footer-banner {
                padding: 20px 0;
                margin-top: 30px;
            }

            .footer-content p {
                font-size: 14px;
            }

            .modal-content {
                width: 98%;
                margin: 5% auto;
                max-height: 90vh;
            }

            .modal-header {
                padding: 20px 15px;
            }

            .modal-title {
                font-size: 20px;
            }

            .modal-body {
                padding: 20px 15px;
            }

            .form-input, .form-select, .form-textarea {
                padding: 10px 12px;
                font-size: 14px;
            }

            .submit-btn {
                padding: 12px 20px;
                font-size: 14px;
            }
        }

        /* Small Devices (phones, 375px to 575px) */
        @media (min-width: 375px) and (max-width: 575px) {
            .container {
                padding: 0 15px;
            }

            .top-banner {
                height: 60px;
            }

            .logo-section {
                padding: 25px 0;
            }

            .company-logo {
                width: 60px;
                height: 60px;
            }

            .company-info h1 {
                font-size: 20px;
            }

            .menu-content {
                flex-direction: column;
                gap: 15px;
            }

            .categories-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 12px;
            }

            .category-card {
                padding: 18px 12px;
            }

            .category-icon {
                font-size: 32px;
                margin-bottom: 10px;
            }

            .category-name {
                font-size: 15px;
            }

            .category-count {
                font-size: 12px;
            }

            .floating-btn {
                width: 50px;
                height: 50px;
                font-size: 20px;
            }

            .modal-content {
                width: 95%;
                margin: 8% auto;
            }
        }

        /* Medium Small Devices (small tablets, 576px to 767px) */
        @media (min-width: 576px) and (max-width: 767px) {
            .container {
                padding: 0 20px;
            }

            .top-banner {
                height: 70px;
            }

            .logo-section {
                padding: 30px 0;
            }

            .company-logo {
                width: 70px;
                height: 70px;
            }

            .company-info h1 {
                font-size: 26px;
            }

            .menu-content {
                flex-direction: column;
                gap: 18px;
            }

            .search-container {
                max-width: 100%;
            }

            .menu-buttons {
                justify-content: center;
                flex-wrap: wrap;
            }

            .categories-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 15px;
            }

            .category-card {
                padding: 20px 15px;
            }

            .category-icon {
                font-size: 36px;
            }

            .category-name {
                font-size: 16px;
            }

            .floating-buttons {
                bottom: 20px;
                right: 20px;
            }

            .modal-content {
                width: 90%;
                margin: 10% auto;
            }
        }

        /* Medium Devices (tablets, 768px to 991px) */
        @media (min-width: 768px) and (max-width: 991px) {
            .container {
                padding: 0 25px;
            }

            .top-banner {
                height: 75px;
            }

            .logo-section {
                padding: 35px 0;
            }

            .company-logo {
                width: 75px;
                height: 75px;
            }

            .company-info h1 {
                font-size: 28px;
            }

            .menu-content {
                flex-direction: row;
                flex-wrap: wrap;
                justify-content: space-between;
                align-items: center;
            }

            .search-container {
                flex: 1;
                max-width: 350px;
                min-width: 250px;
            }

            .menu-buttons {
                flex-shrink: 0;
            }

            .categories-grid {
                grid-template-columns: repeat(4, 1fr);
                gap: 18px;
            }

            .category-card {
                padding: 22px 18px;
            }

            .category-icon {
                font-size: 40px;
            }

            .category-name {
                font-size: 17px;
            }

            .modal-content {
                width: 80%;
                margin: 8% auto;
            }
        }

        /* Large Devices (desktops, 992px to 1199px) */
        @media (min-width: 992px) and (max-width: 1199px) {
            .container {
                max-width: 960px;
                padding: 0 30px;
            }

            .categories-grid {
                grid-template-columns: repeat(4, 1fr);
                gap: 20px;
            }

            .category-card {
                padding: 25px 20px;
            }

            .category-icon {
                font-size: 44px;
            }

            .modal-content {
                width: 70%;
                max-width: 600px;
            }
        }

        /* Extra Large Devices (large desktops, 1200px and up) */
        @media (min-width: 1200px) {
            .container {
                max-width: 1140px;
            }

            .categories-grid {
                grid-template-columns: repeat(6, 1fr);
                gap: 25px;
            }

            .category-card {
                padding: 25px 20px;
            }

            .modal-content {
                width: 60%;
                max-width: 700px;
            }
        }

        /* Ultra Wide Screens (1400px and up) */
        @media (min-width: 1400px) {
            .container {
                max-width: 1320px;
            }

            .categories-grid {
                grid-template-columns: repeat(6, 1fr);
                gap: 30px;
            }

            .section-title {
                font-size: 32px;
            }

            .company-info h1 {
                font-size: 36px;
            }
        }

        /* Landscape Orientation for Mobile Devices */
        @media (max-height: 500px) and (orientation: landscape) {
            .top-banner {
                height: 40px;
            }

            .logo-section {
                padding: 15px 0;
            }

            .company-logo {
                width: 50px;
                height: 50px;
            }

            .company-info h1 {
                font-size: 18px;
            }

            .company-info p {
                font-size: 14px;
            }

            .menu-bar {
                padding: 10px 0;
            }

            .categories-section {
                padding: 20px 0;
            }

            .section-title {
                font-size: 20px;
                margin-bottom: 20px;
            }

            .category-card {
                padding: 15px 10px;
            }

            .category-icon {
                font-size: 24px;
                margin-bottom: 5px;
            }

            .category-name {
                font-size: 12px;
                margin-bottom: 3px;
            }

            .category-count {
                font-size: 10px;
            }

            .floating-buttons {
                bottom: 10px;
                right: 10px;
            }

            .floating-btn {
                width: 40px;
                height: 40px;
                font-size: 16px;
            }

            .modal-content {
                margin: 2% auto;
                max-height: 95vh;
            }
        }

        /* High DPI Displays */
        @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
            .category-icon {
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .company-info h1 {
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }
        }

        /* Print Styles */
        @media print {
            .top-banner,
            .menu-bar,
            .floating-buttons,
            .admin-panel {
                display: none !important;
            }

            .container {
                max-width: 100% !important;
                padding: 0 !important;
            }

            .categories-grid {
                grid-template-columns: repeat(3, 1fr) !important;
                gap: 15px !important;
            }

            .category-card {
                border: 1px solid #ddd !important;
                box-shadow: none !important;
            }

            .business-item {
                border: 1px solid #ddd !important;
                box-shadow: none !important;
                break-inside: avoid;
            }
        }

        /* Accessibility - Reduced Motion */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        /* Dark Mode Support */
        @media (prefers-color-scheme: dark) {
            body {
                background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
                color: #ffffff;
            }

            .logo-section {
                background: #2d2d2d;
            }

            .categories-section {
                background: #2d2d2d;
            }

            .category-card {
                background: #3d3d3d;
                color: #ffffff;
            }

            .category-count {
                background: #4d4d4d;
                color: #ffffff;
            }

            .business-item {
                background: #3d3d3d;
                color: #ffffff;
            }

            .business-list {
                background: #2d2d2d;
            }

            .admin-panel {
                background: #2d2d2d;
            }

            .modal-content {
                background: #2d2d2d;
                color: #ffffff;
            }

            .form-input, .form-select, .form-textarea {
                background: #3d3d3d;
                color: #ffffff;
                border-color: #555;
            }
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body><!-- Pantalla de carga inicial -->
  <div class="loading-screen" id="loadingScreen">
   <div class="loading-logo">
    🏪
   </div>
   <div class="loading-text">
    Mi Directorio Local
   </div>
   <div class="loading-subtitle">
    Conectando tu ciudad con sus mejores negocios
   </div>
   <div class="loading-progress">
    <div class="loading-progress-bar"></div>
   </div>
  </div><!-- Contenido principal -->
  <div class="main-content" id="mainContent"><!-- Franja naranja superior -->
   <div class="top-banner"></div><!-- Logo de la empresa -->
   <div class="logo-section">
    <div class="container">
     <div class="logo-container"><img src="https://via.placeholder.com/80x80/db3717/ffffff?text=L" alt="Logo" class="company-logo" id="companyLogo">
      <div class="company-info">
       <h1 id="companyName">Mi Directorio Local</h1>
       <p id="cityName">Descubre los mejores negocios de tu ciudad</p>
      </div>
     </div>
    </div>
   </div><!-- Barra de menú con búsqueda -->
   <div class="menu-bar">
    <div class="container">
     <div class="menu-content">
      <div class="search-container"><input type="text" class="search-input" id="searchInput" placeholder="Buscar negocios..."> <button class="search-btn" onclick="searchBusinesses()">🔍</button>
      </div>
      <div class="menu-buttons"><button class="menu-btn" onclick="showAboutUs()">¿Quiénes Somos?</button> <button class="menu-btn" onclick="showServices()">Servicios que Prestamos</button> <button class="menu-btn" onclick="contactForHiring()">Contratar</button>
      </div>
     </div>
    </div>
   </div><!-- Contenido principal -->
   <div class="container"><!-- Sección de categorías -->
    <div class="categories-section">
     <h2 class="section-title">Categorías de Negocios</h2>
     <div class="categories-grid" id="categoriesGrid"><!-- Las categorías se cargarán dinámicamente -->
     </div>
    </div><!-- Lista de negocios -->
    <div class="business-list" id="businessList">
     <h2 id="businessListTitle">Resultados de Búsqueda</h2>
     <div id="businessItems"><!-- Los negocios se cargarán dinámicamente -->
     </div>
    </div><!-- Página de detalles del negocio -->
    <div class="business-details-page" id="businessDetailsPage">
     <div class="business-content"><!-- Información de contacto -->
      <div class="business-section">
       <h3 class="section-header">📞 Información de Contacto</h3>
       <div class="info-grid">
        <div class="info-card">
         <div class="info-item">
          <div class="info-icon">
           📍
          </div>
          <div class="info-content">
           <div class="info-label">
            Dirección
           </div>
           <div class="info-value" id="detailAddress">
            Dirección del negocio
           </div>
          </div>
         </div>
         <div class="info-item">
          <div class="info-icon">
           📞
          </div>
          <div class="info-content">
           <div class="info-label">
            Teléfono
           </div>
           <div class="info-value" id="detailPhone">
            Teléfono del negocio
           </div>
          </div>
         </div>
         <div class="info-item" id="whatsappInfo" style="display: none;">
          <div class="info-icon">
           💬
          </div>
          <div class="info-content">
           <div class="info-label">
            WhatsApp
           </div>
           <div class="info-value" id="detailWhatsapp">
            WhatsApp del negocio
           </div>
          </div>
         </div>
        </div>
        <div class="info-card">
         <div class="info-item">
          <div class="info-icon">
           🕒
          </div>
          <div class="info-content">
           <div class="info-label">
            Estado Actual
           </div>
           <div class="info-value open">
            Abierto ahora
           </div>
          </div>
         </div>
         <div class="info-item">
          <div class="info-icon">
           🌐
          </div>
          <div class="info-content">
           <div class="info-label">
            Sitio Web
           </div>
           <div class="info-value">
            www.ejemplo.com
           </div>
          </div>
         </div>
         <div class="info-item">
          <div class="info-icon">
           📧
          </div>
          <div class="info-content">
           <div class="info-label">
            Email
           </div>
           <div class="info-value">
            contacto@ejemplo.com
           </div>
          </div>
         </div>
        </div>
       </div>
      </div><!-- Descripción -->
      <div class="business-section">
       <h3 class="section-header">📝 Acerca de este negocio</h3>
       <div class="info-card">
        <p id="detailDescription" style="margin: 0; line-height: 1.6; color: #333;">Descripción del negocio</p>
       </div>
      </div><!-- Horarios de atención -->
      <div class="business-section">
       <h3 class="section-header">🕒 Horarios de Atención</h3>
       <div class="hours-grid">
        <div class="hours-day"><span class="day-name">Lunes</span> <span class="day-hours open">9:00 AM - 6:00 PM</span>
        </div>
        <div class="hours-day"><span class="day-name">Martes</span> <span class="day-hours open">9:00 AM - 6:00 PM</span>
        </div>
        <div class="hours-day"><span class="day-name">Miércoles</span> <span class="day-hours open">9:00 AM - 6:00 PM</span>
        </div>
        <div class="hours-day"><span class="day-name">Jueves</span> <span class="day-hours open">9:00 AM - 6:00 PM</span>
        </div>
        <div class="hours-day"><span class="day-name">Viernes</span> <span class="day-hours open">9:00 AM - 6:00 PM</span>
        </div>
        <div class="hours-day"><span class="day-name">Sábado</span> <span class="day-hours open">10:00 AM - 4:00 PM</span>
        </div>
        <div class="hours-day"><span class="day-name">Domingo</span> <span class="day-hours closed">Cerrado</span>
        </div>
       </div>
      </div><!-- Galería de fotos -->
      <div class="business-section">
       <h3 class="section-header">📸 Galería de Fotos</h3>
       <div class="business-gallery"><img src="https://via.placeholder.com/200x150/db3717/ffffff?text=Foto+1" alt="Foto del negocio" class="gallery-item"> <img src="https://via.placeholder.com/200x150/28a745/ffffff?text=Foto+2" alt="Foto del negocio" class="gallery-item"> <img src="https://via.placeholder.com/200x150/007bff/ffffff?text=Foto+3" alt="Foto del negocio" class="gallery-item"> <img src="https://via.placeholder.com/200x150/ffc107/ffffff?text=Foto+4" alt="Foto del negocio" class="gallery-item">
       </div>
      </div><!-- Botones de acción -->
      <div class="action-buttons"><button class="action-btn" id="callButton" onclick="callBusiness()"> 📞 Llamar Ahora </button> <button class="action-btn" id="whatsappButton" onclick="openWhatsApp()" style="display: none;"> 💬 WhatsApp </button> <button class="action-btn secondary" onclick="shareLocation()"> 📍 Ver en Mapa </button> <button class="action-btn secondary" onclick="shareBusiness()"> 📤 Compartir </button>
      </div>
     </div>
    </div>
   </div><!-- Panel de administración -->
   <div class="admin-panel" id="adminPanel" style="display: none;">
    <h2 class="section-title">Panel de Administración</h2>
    <div class="admin-buttons"><button class="admin-btn primary" onclick="showAddBusiness()">+ Agregar Negocio</button> <button class="admin-btn" onclick="showManageBusinesses()">Gestionar Negocios</button> <button class="admin-btn" onclick="showManageCategories()">Gestionar Categorías</button> <button class="admin-btn" onclick="showSettings()">Configuración</button> <button class="admin-btn" onclick="hideAdminPanel()">Cerrar Panel</button>
    </div>
    <div id="businessTable"><!-- Tabla de negocios se cargará aquí -->
    </div>
   </div>
  </div><!-- Modal -->
  <div id="modal" class="modal">
   <div class="modal-content">
    <div class="modal-header">
     <h2 class="modal-title" id="modalTitle">Título del Modal</h2><span class="close" onclick="closeModal()">×</span>
    </div>
    <div class="modal-body" id="modalBody"><!-- El contenido del modal se cargará dinámicamente -->
    </div>
   </div>
  </div><!-- Carrusel de logos -->
  <div class="carousel-section">
   <div class="carousel-container">
    <div class="carousel-track" id="carouselTrack"><img src="https://via.placeholder.com/80x80/db3717/ffffff?text=1" alt="Logo 1" class="carousel-image"> <img src="https://via.placeholder.com/80x80/28a745/ffffff?text=2" alt="Logo 2" class="carousel-image"> <img src="https://via.placeholder.com/80x80/007bff/ffffff?text=3" alt="Logo 3" class="carousel-image"> <img src="https://via.placeholder.com/80x80/ffc107/ffffff?text=4" alt="Logo 4" class="carousel-image"> <img src="https://via.placeholder.com/80x80/dc3545/ffffff?text=5" alt="Logo 5" class="carousel-image"> <img src="https://via.placeholder.com/80x80/6f42c1/ffffff?text=6" alt="Logo 6" class="carousel-image"> <img src="https://via.placeholder.com/80x80/fd7e14/ffffff?text=7" alt="Logo 7" class="carousel-image"> <img src="https://via.placeholder.com/80x80/20c997/ffffff?text=8" alt="Logo 8" class="carousel-image"> <!-- Duplicamos las imágenes para efecto continuo --> <img src="https://via.placeholder.com/80x80/db3717/ffffff?text=1" alt="Logo 1" class="carousel-image"> <img src="https://via.placeholder.com/80x80/28a745/ffffff?text=2" alt="Logo 2" class="carousel-image"> <img src="https://via.placeholder.com/80x80/007bff/ffffff?text=3" alt="Logo 3" class="carousel-image"> <img src="https://via.placeholder.com/80x80/ffc107/ffffff?text=4" alt="Logo 4" class="carousel-image"> <img src="https://via.placeholder.com/80x80/dc3545/ffffff?text=5" alt="Logo 5" class="carousel-image"> <img src="https://via.placeholder.com/80x80/6f42c1/ffffff?text=6" alt="Logo 6" class="carousel-image"> <img src="https://via.placeholder.com/80x80/fd7e14/ffffff?text=7" alt="Logo 7" class="carousel-image"> <img src="https://via.placeholder.com/80x80/20c997/ffffff?text=8" alt="Logo 8" class="carousel-image">
    </div>
   </div>
  </div><!-- Pie de página -->
  <div class="footer-banner"><button class="footer-admin-btn" onclick="toggleAdminPanel()" title="Panel de Administración">⚙️</button>
   <div class="container">
    <div class="footer-content">
     <p>Hecho por Localizate</p>
    </div>
   </div>
  </div><!-- Botones flotantes -->
  <div class="floating-buttons"><button class="floating-btn scroll-top" onclick="scrollToTop()" title="Ir arriba">↑</button>
  </div> <!-- Fin del contenido principal -->
  <script>
        // Configuración por defecto
        const defaultConfig = {
            company_name: "Mi Directorio Local",
            city_name: "Descubre los mejores negocios de tu ciudad",
            search_placeholder: "Buscar negocios..."
        };

        // Datos de ejemplo
        let businesses = [
            {
                id: 4,
                name: "Publisolum",
                category: "servicios",
                address: "Av. Digital 456",
                phone: "555-0404",
                description: "l Agencia de marketing digital y publicidad. Especialistas en diseño web, redes sociales, SEO y campañas publicitarias. Llevamos tu negocio al siguiente nivel digital.",
                whatsapp: "5550404",
                instagram: "@publisolum",
                logo: "img/logo19.jpg",
                photos: [
                    " img/logo-empresa.jpg",
                    "https://via.placeholder.com/400x300/28a745/ffffff?text=Equipo+Trabajo",
                    "https://via.placeholder.com/400x300/007bff/ffffff?text=Proyectos+Web"
                ]
            },
            {
                id: 5,
                name: "Servisolum",
                category: "servicios",
                address: "Av. Tecnológica 789",
                phone: "555-0505",
                description: "Empresa especializada en servicios tecnológicos integrales. Ofrecemos soluciones en desarrollo de software, mantenimiento de equipos, consultoría IT y soporte técnico. Tu aliado tecnológico de confianza.",
                whatsapp: "5550505",
                instagram: "@servisolum",
                logo: "https://via.placeholder.com/120x120/007bff/ffffff?text=SS",
                photos: [
                    "https://via.placeholder.com/400x300/007bff/ffffff?text=Oficina+Servisolum",
                    "https://via.placeholder.com/400x300/17a2b8/ffffff?text=Equipo+Tecnico",
                    "https://via.placeholder.com/400x300/6f42c1/ffffff?text=Laboratorio+IT",
                    "https://via.placeholder.com/400x300/28a745/ffffff?text=Proyectos+Software"
                ]
            },
            {
                id: 6,
                name: "Anahata",
                category: "escuelas",
                address: "Calle de la Sabiduría 321",
                phone: "555-0606",
                description: "Centro educativo integral enfocado en el desarrollo holístico de los estudiantes. Ofrecemos educación de calidad con metodologías innovadoras, fomentando el crecimiento académico, emocional y espiritual de cada alumno.",
                whatsapp: "5550606",
                instagram: "@anahata_educacion",
                logo: "https://via.placeholder.com/120x120/6f42c1/ffffff?text=A",
                photos: [
                    "https://via.placeholder.com/400x300/6f42c1/ffffff?text=Aulas+Anahata",
                    "https://via.placeholder.com/400x300/28a745/ffffff?text=Patio+Escolar",
                    "https://via.placeholder.com/400x300/007bff/ffffff?text=Biblioteca",
                    "https://via.placeholder.com/400x300/ffc107/ffffff?text=Laboratorio+Ciencias"
                ]
            }
        ];

        const categories = [
            { id: 'hoteles', name: 'Hoteles', icon: '🏨', count: 0 },
            { id: 'restaurantes', name: 'Restaurantes', icon: '🍽️', count: 0 },
            { id: 'heladerias', name: 'Heladerías', icon: '🍦', count: 0 },
            { id: 'servicios', name: 'Servicios', icon: '🛠️', count: 0 },
            { id: 'farmacias', name: 'Farmacias', icon: '💊', count: 0 },
            { id: 'supermercados', name: 'Supermercados', icon: '🛒', count: 0 },
            { id: 'bancos', name: 'Bancos', icon: '🏦', count: 0 },
            { id: 'gasolineras', name: 'Gasolineras', icon: '⛽', count: 0 },
            { id: 'hospitales', name: 'Hospitales', icon: '🏥', count: 0 },
            { id: 'escuelas', name: 'Escuelas', icon: '🏫', count: 0 },
            { id: 'gimnasios', name: 'Gimnasios', icon: '💪', count: 0 },
            { id: 'peluquerias', name: 'Peluquerías', icon: '💇', count: 0 },
            { id: 'talleres', name: 'Talleres', icon: '🔧', count: 0 }
        ];

        // Variables globales para navegación
        let currentBusiness = null;
        let previousView = 'all'; // 'categories', 'search', 'category', 'all'
        let previousCategoryId = null;

        // Funciones principales
        function init() {
            loadCategoriesFromStorage(); // Cargar categorías primero
            loadBusinessesFromStorage();
            updateCategoryCounts();
            renderCategories();
            showAllBusinesses(); // Mostrar todos los negocios al iniciar
        }

        // Función para mostrar detalles del negocio
        function showBusinessDetails(businessId) {
            const business = businesses.find(b => b.id === businessId);
            if (!business) {
                showNotification('Negocio no encontrado', 'error');
                return;
            }

            currentBusiness = business;
            const category = categories.find(c => c.id === business.category);

            // Ocultar todas las secciones principales EXCEPTO el pie de página principal
            document.querySelector('.top-banner').style.display = 'none';
            document.querySelector('.logo-section').style.display = 'none';
            document.querySelector('.menu-bar').style.display = 'none';
            document.querySelector('.carousel-section').style.display = 'none';
            document.getElementById('businessList').style.display = 'none';
            document.querySelector('.categories-section').style.display = 'none';
            document.getElementById('adminPanel').style.display = 'none';
            
            // Mostrar página de detalles
            document.getElementById('businessDetailsPage').style.display = 'block';

            // Crear el contenido completo de la página de detalles
            document.getElementById('businessDetailsPage').innerHTML = `
                <button class="back-button" onclick="goBackToList()">
                    ← Volver
                </button>
                <div style="display: flex; align-items: center; gap: 20px; margin-bottom: 20px; flex-wrap: wrap;">
                    <img src="${business.logo && business.logo.trim() ? business.logo : 'https://via.placeholder.com/120x120/db3717/ffffff?text=LOGO'}" alt="Logo del negocio" style="width: 120px; height: 120px; border-radius: 10px; border: 3px solid #db3717; object-fit: cover; flex-shrink: 0;" onerror="this.src='https://via.placeholder.com/120x120/db3717/ffffff?text=LOGO'; this.alt='Logo no disponible';">
                    <div style="flex: 1; min-width: 250px;">
                        <h1 class="business-title" style="margin: 0 0 10px 0;">${business.name}</h1>
                        <div class="business-category-badge">${category ? category.name : business.category}</div>
                    </div>
                </div>
                
                <div class="business-content">


                    <!-- Descripción -->
                    <div class="business-section">
                        <h3 class="section-header">📝 Acerca de este negocio</h3>
                        <div class="info-card">
                            <p style="margin: 0; line-height: 1.6; color: #333;">
                                ${business.description}
                            </p>
                        </div>
                        
                        <!-- Botones de acción -->
                        <div class="action-buttons" style="margin-top: 25px;">
                            <button class="action-btn" onclick="callBusiness()">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"/>
                                </svg>
                                Llamar Ahora
                            </button>
                            ${business.whatsapp && business.whatsapp.trim() ? `
                            <button class="action-btn" onclick="openWhatsApp()" style="background: linear-gradient(45deg, #25D366, #128C7E);">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.890-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.785"/>
                                </svg>
                                WhatsApp
                            </button>
                            ` : ''}
                            <button class="action-btn" onclick="openInstagram()" style="background: linear-gradient(45deg, #E4405F, #C13584, #833AB4);">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
                                </svg>
                                Instagram
                            </button>
                            <button class="action-btn secondary" onclick="shareLocation()">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
                                </svg>
                                Ver en Mapa
                            </button>
                            <button class="action-btn secondary" onclick="shareBusiness()">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"/>
                                </svg>
                                Compartir
                            </button>
                        </div>
                    </div>

                    <!-- Galería de fotos -->
                    <div class="business-section">
                        <h3 class="section-header">📸 Galería de Fotos</h3>
                        <div class="business-gallery">
                            ${business.photos && business.photos.length > 0 ? 
                                business.photos.map((photo, index) => `
                                    <img src="${photo}" alt="Foto ${index + 1} del negocio" class="gallery-item" onerror="this.src='https://via.placeholder.com/200x150/db3717/ffffff?text=Foto+${index + 1}'; this.alt='Foto no disponible';" onclick="openImageModal('${photo}')">
                                `).join('') :
                                `<img src="https://via.placeholder.com/200x150/db3717/ffffff?text=Foto+1" alt="Foto del negocio" class="gallery-item">
                                <img src="https://via.placeholder.com/200x150/28a745/ffffff?text=Foto+2" alt="Foto del negocio" class="gallery-item">
                                <img src="https://via.placeholder.com/200x150/007bff/ffffff?text=Foto+3" alt="Foto del negocio" class="gallery-item">
                                <img src="https://via.placeholder.com/200x150/ffc107/ffffff?text=Foto+4" alt="Foto del negocio" class="gallery-item">`
                            }
                        </div>
                        ${(!business.photos || business.photos.length === 0) ? 
                            '<p style="text-align: center; color: #666; font-style: italic; margin-top: 20px;">Este negocio aún no ha subido fotos de su galería.</p>' : ''
                        }
                    </div>
                </div>

                <!-- Carrusel de logos en el perfil -->
                <div class="carousel-section" style="margin-top: 40px;">
                    <div class="carousel-container">
                        <div class="carousel-track">
                            <img src="img/logo19.jpg" alt="Logo 1" class="carousel-image">
                            <img src="https://via.placeholder.com/80x80/28a745/ffffff?text=2" alt="Logo 2" class="carousel-image">
                            <img src="https://via.placeholder.com/80x80/007bff/ffffff?text=3" alt="Logo 3" class="carousel-image">
                            <img src="https://via.placeholder.com/80x80/ffc107/ffffff?text=4" alt="Logo 4" class="carousel-image">
                            <img src="https://via.placeholder.com/80x80/dc3545/ffffff?text=5" alt="Logo 5" class="carousel-image">
                            <img src="https://via.placeholder.com/80x80/6f42c1/ffffff?text=6" alt="Logo 6" class="carousel-image">
                            <img src="https://via.placeholder.com/80x80/fd7e14/ffffff?text=7" alt="Logo 7" class="carousel-image">
                            <img src="https://via.placeholder.com/80x80/20c997/ffffff?text=8" alt="Logo 8" class="carousel-image">
                            <!-- Duplicamos las imágenes para efecto continuo -->
                            <img src="https://via.placeholder.com/80x80/db3717/ffffff?text=1" alt="Logo 1" class="carousel-image">
                            <img src="https://via.placeholder.com/80x80/28a745/ffffff?text=2" alt="Logo 2" class="carousel-image">
                            <img src="https://via.placeholder.com/80x80/007bff/ffffff?text=3" alt="Logo 3" class="carousel-image">
                            <img src="https://via.placeholder.com/80x80/ffc107/ffffff?text=4" alt="Logo 4" class="carousel-image">
                            <img src="https://via.placeholder.com/80x80/dc3545/ffffff?text=5" alt="Logo 5" class="carousel-image">
                            <img src="https://via.placeholder.com/80x80/6f42c1/ffffff?text=6" alt="Logo 6" class="carousel-image">
                            <img src="https://via.placeholder.com/80x80/fd7e14/ffffff?text=7" alt="Logo 7" class="carousel-image">
                            <img src="https://via.placeholder.com/80x80/20c997/ffffff?text=8" alt="Logo 8" class="carousel-image">
                        </div>
                    </div>
                </div>



                <!-- Botón flotante para subir -->
                <div class="floating-buttons">
                    <button class="floating-btn scroll-top" onclick="scrollToTop()" title="Ir arriba">↑</button>
                </div>
            `;

            // Scroll al inicio de la página
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Función para volver a la lista anterior
        function goBackToList() {
            // Mostrar todas las secciones principales
            document.querySelector('.top-banner').style.display = 'block';
            document.querySelector('.logo-section').style.display = 'block';
            document.querySelector('.menu-bar').style.display = 'block';
            document.querySelector('.carousel-section').style.display = 'block';
            document.querySelector('.footer-banner').style.display = 'block';
            
            // Ocultar página de detalles
            document.getElementById('businessDetailsPage').style.display = 'none';
            
            if (previousView === 'search') {
                // Volver a los resultados de búsqueda
                document.getElementById('businessList').style.display = 'block';
                document.querySelector('.categories-section').style.display = 'block';
            } else if (previousView === 'category' && previousCategoryId) {
                // Volver a la categoría específica
                document.querySelector('.categories-section').style.display = 'block';
                showCategoryBusinesses(previousCategoryId);
            } else if (previousView === 'all') {
                // Volver a la vista de todos los negocios
                document.querySelector('.categories-section').style.display = 'block';
                showAllBusinesses();
            } else {
                // Volver a la vista principal de categorías
                document.getElementById('businessList').style.display = 'none';
                document.querySelector('.categories-section').style.display = 'block';
            }
            
            // Mostrar botones flotantes en vista principal
            document.querySelector('.floating-buttons').style.display = 'flex';
            
            // Scroll al inicio
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Funciones de acción para los botones
        function callBusiness() {
            if (currentBusiness && currentBusiness.phone) {
                const phoneNumber = currentBusiness.phone.replace(/\D/g, ''); // Remover caracteres no numéricos
                window.open(`tel:${phoneNumber}`, '_self');
            }
        }

        function openWhatsApp() {
            if (currentBusiness && currentBusiness.whatsapp) {
                const whatsappNumber = currentBusiness.whatsapp.replace(/\D/g, ''); // Remover caracteres no numéricos
                const message = encodeURIComponent(`¡Hola! Me interesa obtener más información sobre ${currentBusiness.name}.`);
                const whatsappUrl = `https://wa.me/${whatsappNumber}?text=${message}`;
                window.open(whatsappUrl, '_blank', 'noopener,noreferrer');
            }
        }

        function shareLocation() {
            if (currentBusiness && currentBusiness.address) {
                const address = encodeURIComponent(currentBusiness.address);
                const mapsUrl = `https://www.google.com/maps/search/?api=1&query=${address}`;
                window.open(mapsUrl, '_blank', 'noopener,noreferrer');
            }
        }

        function shareBusiness() {
            if (currentBusiness) {
                const shareText = `¡Mira este negocio! ${currentBusiness.name} - ${currentBusiness.address}. Tel: ${currentBusiness.phone}`;
                
                if (navigator.share) {
                    navigator.share({
                        title: currentBusiness.name,
                        text: shareText,
                        url: window.location.href
                    }).catch(err => console.log('Error sharing:', err));
                } else {
                    // Fallback: copiar al portapapeles
                    navigator.clipboard.writeText(shareText).then(() => {
                        showNotification('Información copiada al portapapeles', 'success');
                    }).catch(() => {
                        showNotification('No se pudo compartir la información', 'error');
                    });
                }
            }
        }

        function openInstagram() {
            if (currentBusiness && currentBusiness.instagram) {
                const instagramUrl = currentBusiness.instagram.startsWith('@') 
                    ? `https://www.instagram.com/${currentBusiness.instagram.substring(1)}/`
                    : `https://www.instagram.com/${currentBusiness.instagram}/`;
                window.open(instagramUrl, '_blank', 'noopener,noreferrer');
            } else {
                // Si no tiene Instagram configurado, buscar por nombre del negocio
                const searchQuery = encodeURIComponent(currentBusiness.name);
                const instagramSearchUrl = `https://www.instagram.com/explore/search/keyword/?q=${searchQuery}`;
                window.open(instagramSearchUrl, '_blank', 'noopener,noreferrer');
            }
        }

        function openImageModal(imageUrl) {
            document.getElementById('modalTitle').textContent = 'Vista de Imagen';
            document.getElementById('modalBody').innerHTML = `
                <div style="text-align: center;">
                    <img src="${imageUrl}" alt="Imagen ampliada" style="max-width: 100%; max-height: 70vh; border-radius: 10px; box-shadow: 0 4px 20px rgba(0,0,0,0.3);" onerror="this.src='https://via.placeholder.com/400x300/db3717/ffffff?text=Imagen+no+disponible'; this.alt='Imagen no disponible';">
                    <div style="margin-top: 15px;">
                        <button onclick="window.open('${imageUrl}', '_blank')" class="submit-btn" style="margin-right: 10px;">Abrir en Nueva Pestaña</button>
                        <button onclick="closeModal()" class="admin-btn">Cerrar</button>
                    </div>
                </div>
            `;
            document.getElementById('modal').style.display = 'block';
        }

        function updateCategoryCounts() {
            categories.forEach(category => {
                category.count = businesses.filter(business => business.category === category.id).length;
            });
        }

        function renderCategories() {
            const grid = document.getElementById('categoriesGrid');
            grid.innerHTML = categories.map(category => `
                <div class="category-card" onclick="showCategoryBusinesses('${category.id}')">
                    <span class="category-icon">${category.icon}</span>
                    <div class="category-name">${category.name}</div>
                    <div class="category-count">${category.count} negocios</div>
                </div>
            `).join('');
        }

        // Función para mezclar array aleatoriamente (algoritmo Fisher-Yates)
        function shuffleArray(array) {
            const shuffled = [...array]; // Crear una copia para no modificar el original
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        function showAllBusinesses() {
            if (businesses.length === 0) {
                document.getElementById('businessListTitle').textContent = 'Directorio de Negocios';
                document.getElementById('businessItems').innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #666;">
                        <div style="font-size: 48px; margin-bottom: 20px;">🏪</div>
                        <h3 style="color: #151a2b; margin-bottom: 15px;">No hay negocios registrados aún</h3>
                        <p>¡Sé el primero en agregar tu negocio al directorio!</p>
                    </div>
                `;
            } else {
                // Establecer el contexto de navegación
                previousView = 'all';
                previousCategoryId = null;

                // Mezclar los negocios aleatoriamente cada vez que se muestran
                const randomizedBusinesses = shuffleArray(businesses);

                document.getElementById('businessListTitle').textContent = 'Todos los Negocios';
                document.getElementById('businessItems').innerHTML = randomizedBusinesses.map(business => {
                    const category = categories.find(c => c.id === business.category);
                    return `
                        <div class="business-item" onclick="showBusinessDetails(${business.id})">
                            <div style="display: flex; gap: 20px; align-items: flex-start;">
                                <div class="business-logo-container" style="flex-shrink: 0;">
                                    <img src="${business.logo && business.logo.trim() ? business.logo : 'https://via.placeholder.com/120x120/db3717/ffffff?text=LOGO'}" 
                                         alt="Logo de ${business.name}" 
                                         class="business-logo-item"
                                         onerror="this.src='https://via.placeholder.com/120x120/db3717/ffffff?text=LOGO'; this.alt='Logo no disponible';">
                                </div>
                                <div style="flex: 1; min-width: 0;">
                                    <div class="business-name">${business.name}</div>
                                    <div class="business-category">${category ? category.name : business.category}</div>
                                    <div class="business-info">
                                        <strong>📝 Descripción:</strong> ${business.description}
                                    </div>
                                    <div style="margin-top: 10px; color: #db3717; font-size: 14px; font-weight: 600;">
                                        👆 Haz clic para ver más detalles
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                }).join('');
            }
            
            document.getElementById('businessList').style.display = 'block';
        }

        function showCategoryBusinesses(categoryId) {
            const categoryBusinesses = businesses.filter(business => business.category === categoryId);
            const category = categories.find(c => c.id === categoryId);
            
            if (categoryBusinesses.length === 0) {
                showNotification('No hay negocios en esta categoría aún.', 'info');
                return;
            }

            // Establecer el contexto de navegación
            previousView = 'category';
            previousCategoryId = categoryId;

            document.getElementById('businessListTitle').textContent = `${category.name} (${categoryBusinesses.length} negocios)`;
            document.getElementById('businessItems').innerHTML = categoryBusinesses.map(business => `
                <div class="business-item" onclick="showBusinessDetails(${business.id})">
                    <div style="display: flex; gap: 20px; align-items: flex-start;">
                        <div class="business-logo-container" style="flex-shrink: 0;">
                            <img src="${business.logo && business.logo.trim() ? business.logo : 'https://via.placeholder.com/120x120/db3717/ffffff?text=LOGO'}" 
                                 alt="Logo de ${business.name}" 
                                 class="business-logo-item"
                                 onerror="this.src='https://via.placeholder.com/120x120/db3717/ffffff?text=LOGO'; this.alt='Logo no disponible';">
                        </div>
                        <div style="flex: 1; min-width: 0;">
                            <div class="business-name">${business.name}</div>
                            <div class="business-category">${category.name}</div>
                            <div class="business-info">
                                <strong>📝 Descripción:</strong> ${business.description}
                            </div>
                            <div style="margin-top: 10px; color: #db3717; font-size: 14px; font-weight: 600;">
                                👆 Haz clic para ver más detalles
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
            
            document.getElementById('businessList').style.display = 'block';
            document.getElementById('businessList').scrollIntoView({ behavior: 'smooth' });
        }

        function searchBusinesses() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase().trim();
            
            if (!searchTerm) {
                document.getElementById('businessList').style.display = 'none';
                return;
            }

            // Establecer el contexto de navegación
            previousView = 'search';
            previousCategoryId = null;

            const filteredBusinesses = businesses.filter(business => 
                business.name.toLowerCase().includes(searchTerm) ||
                business.description.toLowerCase().includes(searchTerm) ||
                business.address.toLowerCase().includes(searchTerm) ||
                categories.find(c => c.id === business.category)?.name.toLowerCase().includes(searchTerm)
            );

            if (filteredBusinesses.length === 0) {
                document.getElementById('businessListTitle').textContent = 'No se encontraron resultados';
                document.getElementById('businessItems').innerHTML = '<p style="text-align: center; color: #666; padding: 40px;">No se encontraron negocios que coincidan con tu búsqueda.</p>';
            } else {
                document.getElementById('businessListTitle').textContent = `Resultados de búsqueda (${filteredBusinesses.length} encontrados)`;
                document.getElementById('businessItems').innerHTML = filteredBusinesses.map(business => {
                    const category = categories.find(c => c.id === business.category);
                    return `
                        <div class="business-item" onclick="showBusinessDetails(${business.id})">
                            <div style="display: flex; gap: 20px; align-items: flex-start;">
                                <div class="business-logo-container" style="flex-shrink: 0;">
                                    <img src="${business.logo && business.logo.trim() ? business.logo : 'https://via.placeholder.com/120x120/db3717/ffffff?text=LOGO'}" 
                                         alt="Logo de ${business.name}" 
                                         class="business-logo-item"
                                         onerror="this.src='https://via.placeholder.com/120x120/db3717/ffffff?text=LOGO'; this.alt='Logo no disponible';">
                                </div>
                                <div style="flex: 1; min-width: 0;">
                                    <div class="business-name">${business.name}</div>
                                    <div class="business-category">${category ? category.name : business.category}</div>
                                    <div class="business-info">
                                        <strong>📝 Descripción:</strong> ${business.description}
                                    </div>
                                    <div style="margin-top: 10px; color: #db3717; font-size: 14px; font-weight: 600;">
                                        👆 Haz clic para ver más detalles
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                }).join('');
            }
            
            document.getElementById('businessList').style.display = 'block';
            document.getElementById('businessList').scrollIntoView({ behavior: 'smooth' });
        }

        // Funciones del modal
        function showAboutUs() {
            document.getElementById('modalTitle').textContent = '¿Quiénes Somos?';
            document.getElementById('modalBody').innerHTML = `
                <div style="line-height: 1.6; color: #333;">
                    <p>Somos una plataforma digital dedicada a conectar a los ciudadanos con los mejores negocios locales de su ciudad.</p>
                    <p>Nuestra misión es promover el comercio local y facilitar que las personas descubran nuevos lugares y servicios en su comunidad.</p>
                    <h4 style="color: #151a2b; margin-top: 25px;">Nuestros Valores:</h4>
                    <ul>
                        <li>🤝 Apoyo al comercio local</li>
                        <li>🌟 Calidad en el servicio</li>
                        <li>💡 Innovación tecnológica</li>
                        <li>🏘️ Compromiso con la comunidad</li>
                    </ul>
                </div>
            `;
            document.getElementById('modal').style.display = 'block';
        }

        function showServices() {
            document.getElementById('modalTitle').textContent = 'Servicios que Prestamos';
            document.getElementById('modalBody').innerHTML = `
                <div style="line-height: 1.6; color: #333;">
                    <h4 style="color: #151a2b;">Para Negocios:</h4>
                    <ul>
                        <li>📝 Registro y publicación de negocios</li>
                        <li>📊 Gestión de información comercial</li>
                        <li>🎯 Categorización por sectores</li>
                        <li>📱 Visibilidad en plataforma digital</li>
                    </ul>
                    
                    <h4 style="color: #151a2b; margin-top: 25px;">Para Usuarios:</h4>
                    <ul>
                        <li>🔍 Búsqueda avanzada de negocios</li>
                        <li>🗂️ Navegación por categorías</li>
                        <li>📍 Información de contacto y ubicación</li>
                        <li>💼 Descubrimiento de servicios locales</li>
                    </ul>
                    
                    <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin-top: 20px; text-align: center;">
                        <strong style="color: #db3717;">¡Conectamos tu ciudad con sus mejores negocios!</strong>
                    </div>
                </div>
            `;
            document.getElementById('modal').style.display = 'block';
        }

        function showAddBusiness() {
            document.getElementById('modalTitle').textContent = 'Agregar Nuevo Negocio';
            document.getElementById('modalBody').innerHTML = `
                <form onsubmit="addBusiness(event)">
                    <div class="form-group">
                        <label class="form-label">Nombre del Negocio</label>
                        <input type="text" class="form-input" name="name" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Categoría</label>
                        <select class="form-select" name="category" required>
                            <option value="">Seleccionar categoría</option>
                            ${categories.map(cat => `<option value="${cat.id}">${cat.name}</option>`).join('')}
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Dirección</label>
                        <input type="text" class="form-input" name="address" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Teléfono</label>
                        <input type="tel" class="form-input" name="phone" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Descripción</label>
                        <textarea class="form-textarea" name="description" required></textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">WhatsApp (opcional)</label>
                        <input type="tel" class="form-input" name="whatsapp" placeholder="Ej: 5551234567">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Instagram (opcional)</label>
                        <input type="text" class="form-input" name="instagram" placeholder="Ej: @minegocio o minegocio">
                    </div>
                    
                    <!-- SECCIÓN DE IMÁGENES -->
                    <div class="form-group">
                        <label class="form-label">🖼️ Imágenes del Negocio</label>
                        <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; border: 2px dashed #db3717;">
                            <h4 style="margin: 0 0 15px 0; color: #151a2b; font-size: 16px;">Logo del Negocio</h4>
                            <input type="text" class="form-input" name="logo" placeholder="img/logo-negocio.jpg" style="margin-bottom: 15px;">
                            
                            <h4 style="margin: 15px 0 10px 0; color: #151a2b; font-size: 16px;">Fotos de Galería (hasta 6 fotos)</h4>
                            <input type="text" class="form-input" name="photo1" placeholder="img/galeria/foto1.jpg" style="margin-bottom: 8px;">
                            <input type="text" class="form-input" name="photo2" placeholder="img/galeria/foto2.jpg" style="margin-bottom: 8px;">
                            <input type="text" class="form-input" name="photo3" placeholder="img/galeria/foto3.jpg" style="margin-bottom: 8px;">
                            <input type="text" class="form-input" name="photo4" placeholder="img/galeria/foto4.jpg" style="margin-bottom: 8px;">
                            <input type="text" class="form-input" name="photo5" placeholder="img/galeria/foto5.jpg" style="margin-bottom: 8px;">
                            <input type="text" class="form-input" name="photo6" placeholder="img/galeria/foto6.jpg">
                            
                            <div style="margin-top: 15px; padding: 10px; background: #e8f5e8; border-radius: 6px; font-size: 14px; color: #155724;">
                                <strong>💡 Para imágenes locales:</strong><br>
                                • Crea una carpeta "img" junto a tu archivo HTML<br>
                                • Guarda las imágenes en formato .jpg, .png o .webp<br>
                                • Usa rutas como: img/logo.jpg o img/galeria/foto1.jpg<br>
                                • También puedes usar URLs de internet si prefieres<br>
                                • Recomendado: 800x600 píxeles o mayor para mejor calidad
                            </div>
                        </div>
                    </div>
                    
                    <button type="submit" class="submit-btn">Agregar Negocio</button>
                </form>
            `;
            document.getElementById('modal').style.display = 'block';
        }

        function addBusiness(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            
            // Recopilar las fotos de galería
            const photos = [];
            for (let i = 1; i <= 6; i++) {
                const photo = formData.get(`photo${i}`);
                if (photo && photo.trim()) {
                    photos.push(photo.trim());
                }
            }
            
            const newBusiness = {
                id: Date.now(),
                name: formData.get('name'),
                category: formData.get('category'),
                address: formData.get('address'),
                phone: formData.get('phone'),
                description: formData.get('description'),
                whatsapp: formData.get('whatsapp') || '',
                instagram: formData.get('instagram') || '',
                logo: formData.get('logo') || '',
                photos: photos
            };

            businesses.push(newBusiness);
            saveBusinessesToStorage();
            updateCategoryCounts();
            renderCategories();
            closeModal();
            showNotification('¡Negocio agregado exitosamente!', 'success');
        }

        function showManageBusinesses() {
            if (businesses.length === 0) {
                document.getElementById('modalTitle').textContent = 'Gestionar Negocios';
                document.getElementById('modalBody').innerHTML = `
                    <div style="text-align: center; padding: 40px;">
                        <div style="font-size: 48px; margin-bottom: 20px;">🏪</div>
                        <h3 style="color: #151a2b; margin-bottom: 15px;">No hay negocios registrados</h3>
                        <p style="color: #666; margin-bottom: 25px;">Comienza agregando tu primer negocio al directorio.</p>
                        <button onclick="closeModal(); showAddBusiness();" class="submit-btn">Agregar Primer Negocio</button>
                    </div>
                `;
            } else {
                document.getElementById('modalTitle').textContent = 'Gestionar Negocios';
                document.getElementById('modalBody').innerHTML = `
                    <div style="margin-bottom: 20px;">
                        <button onclick="showAddBusiness()" class="submit-btn" style="margin-bottom: 20px;">+ Agregar Nuevo Negocio</button>
                    </div>
                    <div style="max-height: 400px; overflow-y: auto;">
                        ${businesses.map(business => {
                            const category = categories.find(c => c.id === business.category);
                            return `
                                <div style="background: #f8f9fa; border-radius: 10px; padding: 15px; margin-bottom: 15px; border-left: 4px solid #db3717;">
                                    <div style="display: flex; justify-content: space-between; align-items: flex-start; gap: 15px;">
                                        <div style="flex: 1;">
                                            <h4 style="margin: 0 0 8px 0; color: #151a2b;">${business.name}</h4>
                                            <p style="margin: 0 0 5px 0; color: #666; font-size: 14px;"><strong>Categoría:</strong> ${category ? category.name : business.category}</p>
                                            <p style="margin: 0 0 5px 0; color: #666; font-size: 14px;"><strong>Dirección:</strong> ${business.address}</p>
                                            <p style="margin: 0; color: #666; font-size: 14px;"><strong>Teléfono:</strong> ${business.phone}</p>
                                        </div>
                                        <div style="display: flex; gap: 10px;">
                                            <button onclick="editBusiness(${business.id})" style="background: #28a745; color: white; border: none; padding: 8px 12px; border-radius: 6px; cursor: pointer; font-size: 12px;">Editar</button>
                                            <button onclick="deleteBusiness(${business.id})" style="background: #dc3545; color: white; border: none; padding: 8px 12px; border-radius: 6px; cursor: pointer; font-size: 12px;">Eliminar</button>
                                        </div>
                                    </div>
                                </div>
                            `;
                        }).join('')}
                    </div>
                `;
            }
            document.getElementById('modal').style.display = 'block';
        }

        function editBusiness(id) {
            const business = businesses.find(b => b.id === id);
            if (!business) return;

            document.getElementById('modalTitle').textContent = 'Editar Negocio';
            document.getElementById('modalBody').innerHTML = `
                <form onsubmit="updateBusiness(event, ${id})">
                    <div class="form-group">
                        <label class="form-label">Nombre del Negocio</label>
                        <input type="text" class="form-input" name="name" value="${business.name}" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Categoría</label>
                        <select class="form-select" name="category" required>
                            ${categories.map(cat => `<option value="${cat.id}" ${cat.id === business.category ? 'selected' : ''}>${cat.name}</option>`).join('')}
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Dirección</label>
                        <input type="text" class="form-input" name="address" value="${business.address}" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Teléfono</label>
                        <input type="tel" class="form-input" name="phone" value="${business.phone}" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Descripción</label>
                        <textarea class="form-textarea" name="description" required>${business.description}</textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">WhatsApp (opcional)</label>
                        <input type="tel" class="form-input" name="whatsapp" value="${business.whatsapp || ''}" placeholder="Ej: 5551234567">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Instagram (opcional)</label>
                        <input type="text" class="form-input" name="instagram" value="${business.instagram || ''}" placeholder="Ej: @minegocio o minegocio">
                    </div>
                    
                    <!-- SECCIÓN DE IMÁGENES -->
                    <div class="form-group">
                        <label class="form-label">🖼️ Imágenes del Negocio</label>
                        <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; border: 2px dashed #db3717;">
                            <h4 style="margin: 0 0 15px 0; color: #151a2b; font-size: 16px;">Logo del Negocio</h4>
                            <input type="text" class="form-input" name="logo" value="${business.logo || ''}" placeholder="img/logo-negocio.jpg" style="margin-bottom: 15px;">
                            
                            <h4 style="margin: 15px 0 10px 0; color: #151a2b; font-size: 16px;">Fotos de Galería (hasta 6 fotos)</h4>
                            ${Array.from({length: 6}, (_, i) => `
                                <input type="text" class="form-input" name="photo${i+1}" value="${business.photos && business.photos[i] ? business.photos[i] : ''}" placeholder="img/galeria/foto${i+1}.jpg" style="margin-bottom: 8px;">
                            `).join('')}
                            
                            <div style="margin-top: 15px; padding: 10px; background: #e8f5e8; border-radius: 6px; font-size: 14px; color: #155724;">
                                <strong>💡 Para imágenes locales:</strong><br>
                                • Crea una carpeta "img" junto a tu archivo HTML<br>
                                • Guarda las imágenes en formato .jpg, .png o .webp<br>
                                • Usa rutas como: img/logo.jpg o img/galeria/foto1.jpg<br>
                                • También puedes usar URLs de internet si prefieres<br>
                                • Recomendado: 800x600 píxeles o mayor para mejor calidad
                            </div>
                        </div>
                    </div>
                    
                    <button type="submit" class="submit-btn">Actualizar Negocio</button>
                </form>
            `;
            document.getElementById('modal').style.display = 'block';
        }

        function updateBusiness(event, id) {
            event.preventDefault();
            const formData = new FormData(event.target);
            const businessIndex = businesses.findIndex(b => b.id === id);
            
            if (businessIndex !== -1) {
                // Recopilar las fotos de galería
                const photos = [];
                for (let i = 1; i <= 6; i++) {
                    const photo = formData.get(`photo${i}`);
                    if (photo && photo.trim()) {
                        photos.push(photo.trim());
                    }
                }
                
                businesses[businessIndex] = {
                    ...businesses[businessIndex],
                    name: formData.get('name'),
                    category: formData.get('category'),
                    address: formData.get('address'),
                    phone: formData.get('phone'),
                    description: formData.get('description'),
                    whatsapp: formData.get('whatsapp') || '',
                    instagram: formData.get('instagram') || '',
                    logo: formData.get('logo') || '',
                    photos: photos
                };

                saveBusinessesToStorage();
                updateCategoryCounts();
                renderCategories();
                closeModal();
                showNotification('¡Negocio actualizado exitosamente!', 'success');
            }
        }

        // FUNCIÓN ARREGLADA PARA ELIMINAR NEGOCIOS
        function deleteBusiness(id) {
            try {
                // Buscar el negocio
                const business = businesses.find(b => b.id === id);
                if (!business) {
                    showNotification('Negocio no encontrado', 'error');
                    return;
                }

                // Eliminar directamente sin confirmación para que funcione
                businesses = businesses.filter(b => b.id !== id);
                
                // Guardar cambios
                saveBusinessesToStorage();
                updateCategoryCounts();
                renderCategories();
                
                // Actualizar la vista del modal
                showManageBusinesses();
                
                // Mostrar confirmación
                showNotification('¡Negocio eliminado exitosamente!', 'success');
                
            } catch (error) {
                console.error('Error al eliminar negocio:', error);
                showNotification('Error al eliminar el negocio', 'error');
            }
        }

        function showManageCategories() {
            document.getElementById('modalTitle').textContent = 'Gestionar Categorías';
            document.getElementById('modalBody').innerHTML = `
                <div style="margin-bottom: 20px;">
                    <button onclick="showAddCategory()" class="submit-btn" style="margin-bottom: 20px;">+ Agregar Nueva Categoría</button>
                </div>
                <div style="max-height: 400px; overflow-y: auto;">
                    ${categories.map(category => `
                        <div style="background: #f8f9fa; border-radius: 10px; padding: 15px; margin-bottom: 15px; border-left: 4px solid #db3717;">
                            <div style="display: flex; justify-content: space-between; align-items: center; gap: 15px;">
                                <div style="flex: 1; display: flex; align-items: center; gap: 15px;">
                                    <span style="font-size: 32px;">${category.icon}</span>
                                    <div>
                                        <h4 style="margin: 0 0 5px 0; color: #151a2b;">${category.name}</h4>
                                        <p style="margin: 0; color: #666; font-size: 14px;">ID: ${category.id} • ${category.count} negocios</p>
                                    </div>
                                </div>
                                <div style="display: flex; gap: 10px;">
                                    <button onclick="editCategory('${category.id}')" style="background: #28a745; color: white; border: none; padding: 8px 12px; border-radius: 6px; cursor: pointer; font-size: 12px;">Editar</button>
                                    <button onclick="deleteCategory('${category.id}')" style="background: #dc3545; color: white; border: none; padding: 8px 12px; border-radius: 6px; cursor: pointer; font-size: 12px;" ${category.count > 0 ? 'disabled title="No se puede eliminar: tiene negocios asociados"' : ''}>Eliminar</button>
                                </div>
                            </div>
                        </div>
                    `).join('')}
                </div>
                <div style="margin-top: 20px; padding: 15px; background: #e3f2fd; border-radius: 8px; border-left: 4px solid #2196f3;">
                    <small style="color: #1565c0;">
                        <strong>💡 Información:</strong> Solo puedes eliminar categorías que no tengan negocios asociados. Para eliminar una categoría con negocios, primero mueve o elimina todos los negocios de esa categoría.
                    </small>
                </div>
            `;
            document.getElementById('modal').style.display = 'block';
        }

        function showAddCategory() {
            document.getElementById('modalTitle').textContent = 'Agregar Nueva Categoría';
            document.getElementById('modalBody').innerHTML = `
                <form onsubmit="addCategory(event)">
                    <div class="form-group">
                        <label class="form-label">ID de la Categoría</label>
                        <input type="text" class="form-input" name="categoryId" required placeholder="Ej: tecnologia" pattern="[a-z0-9_]+" title="Solo letras minúsculas, números y guiones bajos">
                        <small style="color: #666; font-size: 12px;">Solo letras minúsculas, números y guiones bajos. Ej: tecnologia, salud_belleza</small>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Nombre de la Categoría</label>
                        <input type="text" class="form-input" name="categoryName" required placeholder="Ej: Tecnología">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Icono (Emoji)</label>
                        <input type="text" class="form-input" name="categoryIcon" required placeholder="Ej: 💻" maxlength="2">
                        <small style="color: #666; font-size: 12px;">Usa un emoji que represente la categoría</small>
                    </div>
                    <div style="margin: 20px 0; padding: 15px; background: #fff3cd; border-radius: 8px; border-left: 4px solid #ffc107;">
                        <small style="color: #856404;">
                            <strong>⚠️ Importante:</strong> Una vez creada la categoría, el ID no se puede cambiar. Asegúrate de que sea descriptivo y único.
                        </small>
                    </div>
                    <button type="submit" class="submit-btn">Agregar Categoría</button>
                </form>
            `;
            document.getElementById('modal').style.display = 'block';
        }

        function addCategory(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            const categoryId = formData.get('categoryId').toLowerCase().trim();
            const categoryName = formData.get('categoryName').trim();
            const categoryIcon = formData.get('categoryIcon').trim();

            // Verificar que el ID no exista
            if (categories.find(cat => cat.id === categoryId)) {
                showNotification('Ya existe una categoría con ese ID', 'error');
                return;
            }

            // Agregar nueva categoría
            const newCategory = {
                id: categoryId,
                name: categoryName,
                icon: categoryIcon,
                count: 0
            };

            categories.push(newCategory);
            saveCategoriesToStorage();
            renderCategories();
            closeModal();
            showNotification('¡Categoría agregada exitosamente!', 'success');
        }

        function editCategory(categoryId) {
            const category = categories.find(cat => cat.id === categoryId);
            if (!category) return;

            document.getElementById('modalTitle').textContent = 'Editar Categoría';
            document.getElementById('modalBody').innerHTML = `
                <form onsubmit="updateCategory(event, '${categoryId}')">
                    <div class="form-group">
                        <label class="form-label">ID de la Categoría</label>
                        <input type="text" class="form-input" value="${category.id}" disabled style="background: #f8f9fa; color: #666;">
                        <small style="color: #666; font-size: 12px;">El ID no se puede modificar una vez creada la categoría</small>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Nombre de la Categoría</label>
                        <input type="text" class="form-input" name="categoryName" value="${category.name}" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Icono (Emoji)</label>
                        <input type="text" class="form-input" name="categoryIcon" value="${category.icon}" required maxlength="2">
                    </div>
                    <div style="margin: 20px 0; padding: 15px; background: #e8f5e8; border-radius: 8px; border-left: 4px solid #28a745;">
                        <small style="color: #155724;">
                            <strong>📊 Estadísticas:</strong> Esta categoría tiene ${category.count} negocios asociados.
                        </small>
                    </div>
                    <button type="submit" class="submit-btn">Actualizar Categoría</button>
                </form>
            `;
            document.getElementById('modal').style.display = 'block';
        }

        function updateCategory(event, categoryId) {
            event.preventDefault();
            const formData = new FormData(event.target);
            const categoryIndex = categories.findIndex(cat => cat.id === categoryId);
            
            if (categoryIndex !== -1) {
                categories[categoryIndex].name = formData.get('categoryName').trim();
                categories[categoryIndex].icon = formData.get('categoryIcon').trim();

                saveCategoriesToStorage();
                renderCategories();
                closeModal();
                showNotification('¡Categoría actualizada exitosamente!', 'success');
            }
        }

        function deleteCategory(categoryId) {
            const category = categories.find(cat => cat.id === categoryId);
            if (!category) return;

            // Verificar que no tenga negocios asociados
            if (category.count > 0) {
                showNotification('No se puede eliminar: la categoría tiene negocios asociados', 'error');
                return;
            }

            // Eliminar la categoría
            const categoryIndex = categories.findIndex(cat => cat.id === categoryId);
            if (categoryIndex !== -1) {
                categories.splice(categoryIndex, 1);
                saveCategoriesToStorage();
                renderCategories();
                showManageCategories(); // Actualizar la vista del modal
                showNotification('¡Categoría eliminada exitosamente!', 'success');
            }
        }

        function showSettings() {
            document.getElementById('modalTitle').textContent = 'Configuración';
            document.getElementById('modalBody').innerHTML = `
                <form onsubmit="saveSettings(event)">
                    <div class="form-group">
                        <label class="form-label">Nombre de la Empresa</label>
                        <input type="text" class="form-input" name="companyName" value="${document.getElementById('companyName').textContent}">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Descripción de la Ciudad</label>
                        <input type="text" class="form-input" name="cityName" value="${document.getElementById('cityName').textContent}">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Texto del Buscador</label>
                        <input type="text" class="form-input" name="searchPlaceholder" value="${document.getElementById('searchInput').placeholder}">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Logo de la Empresa</label>
                        <input type="text" class="form-input" name="companyLogo" value="${document.getElementById('companyLogo').src}" placeholder="img/logo-empresa.jpg">
                        <small style="color: #666; font-size: 12px;">Usa una ruta local como "img/logo.jpg" o una URL completa</small>
                    </div>
                    <button type="submit" class="submit-btn">Guardar Configuración</button>
                </form>
            `;
            document.getElementById('modal').style.display = 'block';
        }

        function saveSettings(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            
            document.getElementById('companyName').textContent = formData.get('companyName');
            document.getElementById('cityName').textContent = formData.get('cityName');
            document.getElementById('searchInput').placeholder = formData.get('searchPlaceholder');
            
            const logoUrl = formData.get('companyLogo');
            if (logoUrl && logoUrl.trim()) {
                document.getElementById('companyLogo').src = logoUrl.trim();
            }
            
            closeModal();
            showNotification('Configuración guardada exitosamente', 'success');
        }

        // Funciones de utilidad
        function closeModal() {
            document.getElementById('modal').style.display = 'none';
        }

        function toggleAdminPanel() {
            const panel = document.getElementById('adminPanel');
            if (panel.style.display === 'none') {
                // Mostrar modal para solicitar clave
                showPasswordModal();
            } else {
                panel.style.display = 'none';
            }
        }

        function showPasswordModal() {
            document.getElementById('modalTitle').textContent = '🔐 Acceso al Panel de Administración';
            document.getElementById('modalBody').innerHTML = `
                <div style="text-align: center; padding: 20px;">
                    <div style="font-size: 48px; margin-bottom: 20px;">🔒</div>
                    <p style="color: #666; margin-bottom: 25px;">Ingresa la clave de administrador para acceder al panel de gestión.</p>
                    <form onsubmit="checkAdminPassword(event)">
                        <div class="form-group">
                            <input type="password" class="form-input" id="adminPassword" placeholder="Ingresa la clave de administrador" required style="text-align: center; font-size: 18px; padding: 15px;">
                        </div>
                        <div style="display: flex; gap: 15px; justify-content: center;">
                            <button type="submit" class="submit-btn" style="width: auto; padding: 12px 25px;">Acceder</button>
                            <button type="button" onclick="closeModal()" class="admin-btn" style="padding: 12px 25px;">Cancelar</button>
                        </div>
                    </form>
                    <div style="margin-top: 20px; padding: 15px; background: #fff3cd; border-radius: 8px; border-left: 4px solid #ffc107;">
                        <small style="color: #856404;">
                            <strong>⚠️ Acceso Restringido:</strong> Solo personal autorizado puede acceder al panel de administración.
                        </small>
                    </div>
                </div>
            `;
            document.getElementById('modal').style.display = 'block';
            
            // Enfocar el campo de contraseña
            setTimeout(() => {
                document.getElementById('adminPassword').focus();
            }, 100);
        }

        function checkAdminPassword(event) {
            event.preventDefault();
            const password = document.getElementById('adminPassword').value;
            const correctPassword = '123';
            
            if (password === correctPassword) {
                closeModal();
                const panel = document.getElementById('adminPanel');
                panel.style.display = 'block';
                panel.scrollIntoView({ behavior: 'smooth' });
                showNotification('¡Acceso concedido! Bienvenido al panel de administración.', 'success');
            } else {
                // Mostrar error
                const errorDiv = document.createElement('div');
                errorDiv.style.cssText = `
                    background: #f8d7da;
                    color: #721c24;
                    padding: 10px 15px;
                    border-radius: 6px;
                    margin-top: 15px;
                    border-left: 4px solid #dc3545;
                    text-align: left;
                `;
                errorDiv.innerHTML = '<strong>❌ Clave incorrecta:</strong> La clave ingresada no es válida. Inténtalo de nuevo.';
                
                // Remover error anterior si existe
                const existingError = document.querySelector('#modalBody .error-message');
                if (existingError) {
                    existingError.remove();
                }
                
                errorDiv.className = 'error-message';
                document.querySelector('#modalBody form').appendChild(errorDiv);
                
                // Limpiar el campo de contraseña
                document.getElementById('adminPassword').value = '';
                document.getElementById('adminPassword').focus();
                
                // Efecto de vibración en el campo
                const passwordField = document.getElementById('adminPassword');
                passwordField.style.animation = 'shake 0.5s ease-in-out';
                setTimeout(() => {
                    passwordField.style.animation = '';
                }, 500);
            }
        }

        function hideAdminPanel() {
            document.getElementById('adminPanel').style.display = 'none';
        }

        function contactForHiring() {
            const message = encodeURIComponent("¡Hola! Me interesa contratar sus servicios para mi negocio. ¿Podrían darme más información sobre sus planes y precios?");
            const whatsappUrl = `https://wa.me/1234567890?text=${message}`;
            window.open(whatsappUrl, '_blank', 'noopener,noreferrer');
        }

        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }

        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            const colors = {
                success: '#28a745',
                error: '#dc3545',
                info: '#17a2b8'
            };
            
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${colors[type] || colors.info};
                color: white;
                padding: 15px 25px;
                border-radius: 8px;
                z-index: 1001;
                font-weight: 600;
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
                animation: slideIn 0.3s ease;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => {
                    if (notification.parentNode) {
                        document.body.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }

        // Funciones de almacenamiento
        function saveBusinessesToStorage() {
            try {
                localStorage.setItem('localBusinesses', JSON.stringify(businesses));
            } catch (error) {
                console.error('Error saving businesses:', error);
                showNotification('Error al guardar los datos', 'error');
            }
        }

        function loadBusinessesFromStorage() {
            try {
                const stored = localStorage.getItem('localBusinesses');
                if (stored) {
                    const parsedBusinesses = JSON.parse(stored);
                    if (Array.isArray(parsedBusinesses) && parsedBusinesses.length > 0) {
                        businesses = parsedBusinesses;
                    }
                    // Si no hay datos guardados o el array está vacío, mantener los datos predeterminados
                }
            } catch (error) {
                console.error('Error loading businesses:', error);
                // En caso de error, mantener los datos predeterminados
            }
        }

        function saveCategoriesToStorage() {
            try {
                localStorage.setItem('localCategories', JSON.stringify(categories));
            } catch (error) {
                console.error('Error saving categories:', error);
                showNotification('Error al guardar las categorías', 'error');
            }
        }

        function loadCategoriesFromStorage() {
            try {
                const stored = localStorage.getItem('localCategories');
                if (stored) {
                    const parsedCategories = JSON.parse(stored);
                    if (Array.isArray(parsedCategories) && parsedCategories.length > 0) {
                        // Mantener las categorías guardadas y agregar el count
                        parsedCategories.forEach(cat => {
                            if (typeof cat.count === 'undefined') {
                                cat.count = 0;
                            }
                        });
                        categories.length = 0; // Limpiar array actual
                        categories.push(...parsedCategories); // Agregar categorías guardadas
                    }
                }
            } catch (error) {
                console.error('Error loading categories:', error);
                // En caso de error, mantener las categorías predeterminadas
            }
        }

        // Event listeners
        document.getElementById('searchInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchBusinesses();
            }
        });

        window.onclick = function(event) {
            const modal = document.getElementById('modal');
            if (event.target === modal) {
                closeModal();
            }
        };

        // Agregar estilos de animación
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
            @keyframes shake {
                0%, 100% { transform: translateX(0); }
                10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
                20%, 40%, 60%, 80% { transform: translateX(5px); }
            }
        `;
        document.head.appendChild(style);

        // SDK Integration
        if (window.elementSdk) {
            const element = {
                defaultConfig: defaultConfig,
                render: async function(config) {
                    const companyNameEl = document.getElementById('companyName');
                    const cityNameEl = document.getElementById('cityName');
                    const searchInputEl = document.getElementById('searchInput');
                    
                    if (companyNameEl) {
                        companyNameEl.textContent = config.company_name || defaultConfig.company_name;
                    }
                    if (cityNameEl) {
                        cityNameEl.textContent = config.city_name || defaultConfig.city_name;
                    }
                    if (searchInputEl) {
                        searchInputEl.placeholder = config.search_placeholder || defaultConfig.search_placeholder;
                    }
                },
                mapToCapabilities: function(config) {
                    return {
                        recolorables: [],
                        borderables: [],
                        fontEditable: undefined,
                        fontSizeable: undefined
                    };
                },
                mapToEditPanelValues: function(config) {
                    return new Map([
                        ["company_name", config.company_name || defaultConfig.company_name],
                        ["city_name", config.city_name || defaultConfig.city_name],
                        ["search_placeholder", config.search_placeholder || defaultConfig.search_placeholder]
                    ]);
                }
            };

            window.elementSdk.init(element);
        }

        // Función para manejar la pantalla de carga
        function initLoadingScreen() {
            // Después de 5 segundos, ocultar la pantalla de carga
            setTimeout(() => {
                const loadingScreen = document.getElementById('loadingScreen');
                const mainContent = document.getElementById('mainContent');
                
                if (loadingScreen) {
                    loadingScreen.classList.add('hidden');
                }
                
                // Inicializar la aplicación después de que se oculte la pantalla de carga
                init();
            }, 5000);
        }

        // Inicializar la aplicación
        document.addEventListener('DOMContentLoaded', () => {
            // Mostrar pantalla de carga primero
            initLoadingScreen();
        });
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'992c1c66c0e067e4',t:'MTc2MTE2ODc4NC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>



